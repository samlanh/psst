	<?php
	$request=Zend_Controller_Front::getInstance()->getRequest();
	$action = $request->getActionName();
	$baseurl  = $this->baseUrl();
	$other=$acl=$this->url(array('module'=>'allreport','controller'=>'other','action'=>'index'), null, true);
	$registrar=$acl=$this->url(array('module'=>'allreport','controller'=>'receiptionist','action'=>'index'), null, true);
	$accoutning=$acl=$this->url(array('module'=>'allreport','controller'=>'accounting','action'=>'index'), null, true);
	$fundation=$acl=$this->url(array('module'=>'allreport','controller'=>'foundation','action'=>'index'), null, true);
	$allstudent=$acl=$this->url(array('module'=>'allreport','controller'=>'allstudent','action'=>'index'), null, true);
	$otherExpense = $this->url(array('module'=>'allreport','controller'=>'accounting','action'=>'rpt-other-expense'), null, true);
	$otherIncome = $this->url(array('module'=>'allreport','controller'=>'accounting','action'=>'rpt-other-income'), null, true);
	$library=$acl=$this->url(array('module'=>'allreport','controller'=>'library','action'=>'index'), null, true);
	
	$dailyReport = $this->url(array('module'=>'registrar','controller'=>'allreports','action'=>'rpt-daily'), null, true);
	
	/*--------------------URLs link display--------------------------*/
		  $tr=Application_Form_FrmLanguages::getCurrentlanguage();
		  $session_user=new Zend_Session_Namespace('authstu');
		  $arr_module = $session_user->arr_acl;
// 		  print_r($arr_module);exit();
		  $menu = array();
		  $module = '';
		  $controller=array();
		  $newarray=array();
		  if(!empty($arr_module)){
		  	foreach ($arr_module as $key => $rs){
		  		if($rs['module']=='report' AND $rs['controller']!='loan'){
		  			continue;
		  		}
		  		$lblcontroller = $rs['label'];
		  		// 			if($rs['controller']=='index' AND $rs['module']=='group' ){
		  		// 				$lblcontroller='CLIENT_INFO';
		  		// 			}
		  		// 			if($rs['controller']=='index' AND $rs['module']=='loan' ){
		  		// 				$lblcontroller='IL_DISBURSE';
		  		// 			}
		  		// 			if($rs['controller']=='index' AND $rs['module']=='other' ){
		  		// 				$lblcontroller='province';
		  		// 			}
		  		// 			if($rs['controller']=='loantype' AND $rs['module']=='other' ){
		  		// 				$lblcontroller='OTHER';
		  		// 			}
		  		// 			if($rs['controller']=='term' AND $rs['module']=='other' ){
		  		// 				$lblcontroller='termcondition';
		  		// 			}
		  		if($module!=$rs['module']){
		  			$newarray= array($rs['controller']=>'<li><a href="">'.$tr->translate(($lblcontroller)).'</a></li>');
		  			$menu[$rs['module']]= $newarray;
		  			$old_module=$rs['module'];
		  		}else{
		  			$newarray= array_merge($newarray,array($rs['controller']=>'<li><a href="">'.$tr->translate(($lblcontroller)).'</a></li>'));
		  			$menu[$rs['module']] = $newarray;
		  		}
		  		$module=$rs['module'];
		  	}
		  }
		  $arr_param_menu = $menu;
		  
		  //print_r($arr_param_menu);exit();
// 		$arr_param_menu=array( 
// 			'home'=>array(			
// 			),
// 			'default'=>array(),
// 				'registrar'=>array(
// 				'studenttest'=>'<li><a href="">'.$tr->translate("STUDENT_TEST").'</a></li>',
// 			    'register'=>'<li><a href="">'.$tr->translate("STUDENT_REGISTRATION").'</a></li>',
// 				'changeproduct'=>'<li><a href="">'.$tr->translate("ប្តូរ/ត្រលប់ទំនិញចូលវិញ").'</a></li>',
// 				'Calculator'=>'<li><a href="">'.$tr->translate("CASHCOUNTSHEET").'</a></li>',
// 				'income'=>'<li><a href="">'.$tr->translate("OTHER_INCOME").'</a></li>',
// 				'expense'=>'<li><a href="">'.$tr->translate("OTHER_EXPENSE").'</a></li>',
// 				'rptproductsold'=>'<li><a href="">'.$tr->translate("របាយការណ៍ផលិតលក់បាន").'</a></li>',
// 				'allreports'=>'<li><a href='.$dailyReport.'>'.$tr->translate("RPT_CASHPAYMENT").'</a></li>',
// 				'rptbytype'=>'<li><a href="">'.$tr->translate("របាយការណ៏សរុបតាមប្រភេទ").'</a></li>',
// 				'studentnearlyendservice'=>'<li><a href="">'.$tr->translate("STUDENT_NEARLY_END_SERVICE").'</a></li>',
// 				'studentpaymentlate'=>'<li><a href="">'.$tr->translate("STUDENT_PAYMENT_LATE").'</a></li>',
// 			),
// 			'global'=>array(
// 				'group'=>'<li><a href="">'.$tr->translate("STUDY_GROUP").'</a></li>',
// 				'subject'=>'<li><a href="">'.$tr->translate("SUBJECT").'</a></li>',
// 				'branch'=>'<li><a href="">'.$tr->translate("BRANCH").'</a></li>',
// 				'degree'=>'<li><a href="">'.$tr->translate("DEGREE").'</a></li>',
// 				'grade'=>'<li><a href="">'.$tr->translate("GRADE").'</a></li>',
// 				'room'=>'<li><a href="">'.$tr->translate("ROOM_NAME").'</a></li>',
// 			    'occupation'=>'<li><a href="">'.$tr->translate("OCCUPATION").'</a></li>',
// 				),
// 			'foundation'=>array(
// 				'register'=>'<li><a href="">'.$tr->translate("REGISTER").'</a></li>',
// 				'studentchangegroup'=>'<li><a href="">'.$tr->translate("STUDENT_CHANGE_GROUP").'</a></li>',
// 				'groupstudentchangegroup'=>'<li><a href="">'.$tr->translate("GROUP_STUDENT_CHANGE_GROUP").'</a></li>',
// 				'studentdrop'=>'<li><a href="">'.$tr->translate("STUDENT_DROP").'</a></li>',
// 				'suspendservice'=>'<li><a href="">'.$tr->translate("STUDENT_SUSPEND_SERVICE").'</a></li>',
// 				'score'=>'<li><a href="">'.$tr->translate("STUDENT_SCORE").'</a></li>',
// 				'gepscore'=>'<li><a href="">'.$tr->translate("STUDENT_SCORE").'(GEP)'.'</a></li>',
// 				'studentattendance'=>'<li><a href="">'.$tr->translate("STUDENT_ATTENDANCE").'</a></li>',
// 			),
// 			'kindergarten'=>array(
// 				'kindergarten'=>'<li><a href="">'.$tr->translate("KINDERGARTEN_REGISTER").'</a></li>',
// 				'studentgroup'=>'<li><a href="">'.$tr->translate("STUDENT_GROUP").'</a></li>',
// 				'studentchangegroup'=>'<li><a href="">'.$tr->translate("STUDENT_CHANGE_GROUP").'</a></li>',
// 				'groupstudentchangegroup'=>'<li><a href="">'.$tr->translate("GROUP_STUDENT_CHANGE_GROUP").'</a></li>',
// 				'studentdrop'=>'<li><a href="">'.$tr->translate("STUDENT_DROP").'</a></li>',
// 				'attendent'=>'<li><a href="">'.$tr->translate("ATTENDENT").'</a></li>',
// 				'attendent'=>'<li><a href="">'.$tr->translate("ATTENDENT").'</a></li>',
// 				'language'=>'<li><a href="">'.$tr->translate("DEGREE_LANGUAGE").'</a></li>',
// 			    'studentscores'=>'<li><a href="">'.$tr->translate("STUDENT_SCORE").'</a></li>',
// 				),
// 				'gep'=>array(
// 				'studentstudy'=>'<li><a href="">'.$tr->translate("GEP_REGISTER").'</a></li>',
// 				'studentgroup'=>'<li><a href="">'.$tr->translate("STUDENT_GROUP").'</a></li>',
// 				'studentchangegroup'=>'<li><a href="">'.$tr->translate("STUDENT_CHANGE_GROUP").'</a></li>',
// 				'groupstudentchangegroup'=>'<li><a href="">'.$tr->translate("GROUP_STUDENT_CHANGE_GROUP").'</a></li>',
// 				'studentdrop'=>'<li><a href="">'.$tr->translate("STUDENT_DROP").'</a></li>',
// 				'attendent'=>'<li><a href="">'.$tr->translate("ATTENDENT").'</a></li>',
// 				'attendent'=>'<li><a href="">'.$tr->translate("ATTENDENT").'</a></li>',
// 				'language'=>'<li><a href="">'.$tr->translate("DEGREE_LANGUAGE").'</a></li>',
// 				),
// 			'accounting'=>array(				
// 				'fee'=>'<li><a href="">'.$tr->translate("TUITION_FEE").'</a></li>',
// 				'servicecharge'=>'<li><a href="">'.$tr->translate("SERVICE_FEE").'</a></li>',
// 				'service'=>'<li><a href="">'.$tr->translate("SERVICE_NAME").'</a></li>',
// 				'services'=>'<li><a href="">'.$tr->translate("SERVICE_CATE").'</a></li>',
// 				'service'=>'<li><a href="">'.$tr->translate("SERVICES").'</a></li>',
// 				'services'=>'<li><a href="">'.$tr->translate("SERVICE_TYPE").'</a></li>',
// 				'creditmemo'=>'<li><a href="">'.$tr->translate("Credit Memo").'</a></li>',
// 				'product'=>'<li><a href="">'.$tr->translate("ORIGINAL_PRODUCT").'</a></li>',
// 				'productset'=>'<li><a href="">'.$tr->translate("ផលិតផលជាកញ្ចប់").'</a></li>',
// 				'purchase'=>'<li><a href="">'.$tr->translate("PURCHASE").'</a></li>',
// 				'productcategory'=>'<li><a href="">'.$tr->translate("PRODUCT_CATEGORY").'</a></li>',
// 			    'exchangerate'=>'<li><a href="">'.$tr->translate("EXCHANGE_RATE_INFORMATION").'</a></li>',
// 				'transfer'=>'<li><a href="">'.$tr->translate("TRANSFER").'</a></li>',
// 				'invoice'=>'<li><a href="">'.$tr->translate("INVOICE").'</a></li>',
// 			),
// 			'library'=>array(
// 					'book'=>'<li><a href="">'.$tr->translate("BOOK").'</a></li>',
// 					'borrowbook'=>'<li><a href="">'.$tr->translate("BORROW_BOOK").'</a></li>',
// 					'returnbook'=>'<li><a href="">'.$tr->translate("RETURN_BOOK").'</a></li>',
// 					'neardayreturnbook'=>'<li><a href="">'.$tr->translate("NEAR_DAY_RETURNBOOK").'</a></li>',
// 					'bookpurchase'=>'<li><a href="">'.$tr->translate("BOOK_PURCHASE").'</a></li>',
// 					'brokenbook'=>'<li><a href="">'.$tr->translate("BROKEN_BOOK").'</a></li>',
// 					'bookcategory'=>'<li><a href="">'.$tr->translate("BOOK_CATEGORY").'</a></li>',
// 					'block'=>'<li><a href="">'.$tr->translate("BLOCK").'</a></li>',
// 			),
// 			'user'=>array(
// 				'index'=>'<li><a href="">'.$tr->translate("USER").'</a></li>',
// 			),	
// 			'rsvacl'=>array(
// 					 	'user'=>'<li><a href="">'.$tr->translate('USER').'</a></li>',
// 						'useraccess'=>'<li><a href="">'.$tr->translate("USER_ACCESS").'</a></li>',
// 					    'acl'=>'<li><a href="">'.$tr->translate("ACL").'</a></li>',
// 						'usertype'=>'<li><a href="">'.$tr->translate("USER_TYPE").'</a></li>',
// 				),
// 			'backup'=>array(
// 						'index'=>'<li><a href="">'.$tr->translate("Backup List").'</a></li>',
// 				),
// 			'allreport'=>array(
// 						'allstudent'=>"<li><span class''><a href=".$allstudent.">".$tr->translate("ALL_STUDENT_REPORT")."</a></span></li>",
// 						'accounting'=>"<li><span class''><a href=".$accoutning.">".$tr->translate("ACCOUNTING_REPORT")."</a></span></li>",
// 						'library'=>"<li><span class''><a href=".$library.">".$tr->translate("LIBRARY_REPORT")."</a></span></li>",
// 			),	
// 			'setting'=>array(
// 						'label'=>'<li><a href="">'.$tr->translate("Label_SETTING").'</a></li>',
// 						'database'=>'<li><a href="">'.$tr->translate("DATA_BASE_SETTING").'</a></li>',
// 						'setting'=>'<li><a href="">'.$tr->translate("System_SETTING").'</a></li>',			
// 				)
// 		); 

	

	?>
	<div id="header-left">
		<ul>
			<?php 
	// 				$request=Zend_Controller_Front::getInstance()->getRequest();
				if($request->getModuleName()!='report'){
					if($request->getModuleName()!='default' AND $action!='changepassword' ){
						$dc=new Application_Model_Decorator();					
						$class="current-left";					
						$menu=$dc->getMenuLeft($arr_param_menu[$request->getModuleName()],$request->getControllerName(),$request->getModuleName());
						//print_r($arr_param_menu[$request->getModuleName()]);
						if($menu) echo $menu;	
					 }		
				}				
			?>
		</ul>																
	</div>