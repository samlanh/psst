<?php
	$tr = Application_Form_FrmLanguages::getCurrentlanguage();
	echo $this->headTitle('ប័ណ្ណចំណាយ');
	$base_url = Application_Form_FrmMessage::getUrl("/");
?>
<style>
#footer{display: none;}
table tr td strong{
	padding-left: 10px;
}
</style>	
<div style="min-height:15cm; margin:0 auto; padding:0.5cm 0.5cm 0cm 0.5cm">	
		<div id="divPrint">
			<?php for($print=0;$print<1;$print++){?>
			<table width="100%"  class="print" cellspacing="0"  cellpadding="0" style=" font-family: ''Times New Roman','Khmer OS Battambang'' !important; height:10cm; font-size:11px !important; margin-top: -10px;white-space:nowrap;">
				
				<tr height="90px;">
					<td colspan="10"  style="" align="center" valign="top">
						<?php echo $this->header?>
					</td>
				</tr>
				<tr>
				    <td colspan="10"  style="" align="center">
						<table width="100%" style="font-size: 10px;margin-top: -20px;">
							<tr>
								<td width="30%">
								</td>
								<td width="40%" align="center" valign="top" style="line-height: 20px;">
									<div style="font-size: 16px;font-family: 'Times New Roman','Khmer OS Muol Light';">ប័ណ្ណចំណាយ</div> 
									<div style="font-size: 13px;font-family:'Times New Roman',''Times New Roman','Khmer OS Battambang'';margin-top:0px;font-weight: bold;">PAYMENT VOUCHER</div> 
								</td>
								<td width="30%">
									<div style="font-size: 16px;font-weight:bold;text-align:center;">
										N<sup>o</sup> : <?php echo $this->row['invoice'];?>
									</div>
								</td>
							</tr>
						</table>
				    </td>
				</tr>
				<tr>
					<td colspan="10">
						<table width="100%" style="font-family: 'Times New Roman','Khmer OS Battambang';font-size:14px;white-space:nowrap;margin-top:-8px;line-height: 17px;">
							<tr>
								<td width="10%"></td>
								<td width="18%"></td>
								<td width="9%"></td>
								<td width="18%"></td>
								<td width="4%"></td>
								<td width="8%"></td>
								<td width="4%"></td>
								<td width="5%"></td>
								<td width="3%"></td>
								<td width="8%"></td>
							</tr>
							<tr style="line-height: 18px;">
								<td class="one ">ចំណាយឱ្យ​ <br />Pay To </td>
								<td valign="top"> :&nbsp; <?php echo $this->row['title'];?> </td>
								<td  align="center">ថ្ងៃចំណាយ <br />Paid Date</td>
								<td valign="top"> :&nbsp; <?php echo date("d-M-Y",strtotime($this->row['date']));?> </td>
								<td colspan="3"><label id="" >ចំណាយជា  <br />Payment Method</label></td>
								<td colspan="3" valign="top">:&nbsp;<?php echo $this->row['pay'];?></td>
							</tr>
							<tr style="line-height: 18px;">
								<td>សម្គាល់  <br /> Note </td>
								<td colspan="9" valign="top"> :&nbsp; <?php echo $this->row['description'];?></td>
							</tr>
							<tr>
								<td colspan="10">
									<table width="100%" border="1" style="border:1px solid #000; border-collapse: collapse;">
										<tr style=" font-size:14px; text-align:center; height:25px;">
											<td style="border:1px solid #000;"><span style="font-family: 'Times New Roman','Khmer OS Battambang';color:#000;font-size: 14;">លរ/No</span></td>
											<td style="border:1px solid #000;"><span style="font-family: 'Times New Roman','Khmer OS Battambang';color:#000;font-size: 14;">ប្រភេទចំណាយ/Expense Type</span></td>
											<td style="border:1px solid #000;"><span style="font-family: 'Times New Roman','Khmer OS Battambang';color:#000;font-size: 14;">ពណ៌នា/Description</span></td>
											<td style="border:1px solid #000;"><span style="font-family: 'Times New Roman','Khmer OS Battambang';color:#000;font-size: 14;">ចំនួនប្រាក់/Amount</span></td>
										</tr>
										<?php $i=0;$total=0;if(!empty($this->detail)){foreach ($this->detail as $row){$i++;?>
											<tr style=" font-size:12px; text-align:center; height:25px;">
												<td><?php echo $i;?></td>
												<td align="left">&nbsp;&nbsp;<?php echo $row['service']?></td>
												<td align="left">&nbsp;&nbsp;<?php echo $row['description']?></td>
												<td><?php echo "$ ".number_format($row['total'],2)?></td>
											</tr>	
										<?php 
											$total = $total + $row['total'];
										}?>
										<?php for($i++;$i<=5;$i++){?>
											<tr style="height: 20px;font-size: 12px;">
												<td width="10%" align="center"><?php echo $i;?></td>
												<td width="35%"></td>
												<td width="35%"></td>
												<td width="20%"></td>
											</tr>
										<?php }}?>
									</table>
								</td>
							</tr>
							<tr>
								<td colspan="10" valign="bottom">
									<table width="100%"   style="font-family:'Times New Roman','Khmer OS Battambang';font-size:14px; line-height:18px;margin-top:-5px;margin-bottom:5px;">
										<tr>
											<td width="20%"></td>
											<td width="20%"></td>
											<td width="15%"></td>
											<td width="15%"></td>
											<td width="15%"></td>
											<td width="15%"></td>
										</tr>
										<tr>
											<td colspan="2"  align="center">
												<div style="margin-top:-5px;"></div>
											</td>
											<td colspan="2">&nbsp;
												
											</td>
											<td>
												<div style="margin-top:-15px;"></div>
											</td>
											<td>
											</td>
										</tr>
										<tr>
											<td colspan="4"></td>
											<td>
												<div style="margin-top:-20px;">ចំណាយសរុប <br />Paid Amount</div>
											</td>
											<td>
												<div style="width:100%;border-bottom:1px solid #000;margin-bottom:px;margin-top: -20px; font-weight: bold;font-size: 16px;">: &nbsp;<?php echo "$ ".number_format($total,2);?></div>
											</td>
										</tr>
										<tr >
											<td colspan="2" align="center" valign="top">
												<div style="color:#000; font-size: 14px;margin-top:-10px;"> 
													<?php 
													   $session_user=new Zend_Session_Namespace('authstu');
													   $last_name=$session_user->last_name;
													   $username = $session_user->first_name;
													   echo"Paid By : ".$last_name." ".$username;
													?>
												</div>
											</td>
											<td colspan="2" valign="top">
												<div style="color:#000; font-size: 14px;margin-top:-10px;"> 
													<?php 
													   echo"Received By :........................ &nbsp;&nbsp;";
													?>
												</div>
											</td>
											<td></td>
											<td></td>
										</tr>
										<tr>
											<td colspan="2" align="center" >
												<div style="width:70%;border-bottom:1px solid #000;margin-bottom:10px;margin-top: 40px;"></div>
												<div style="margin-top:-11px;">Date : <?php echo date('d / m / Y , H:i:s ',strtotime($this->row['create_date']));?></div>
											</td>
											<td colspan="2" align="center" width="30%">
												<div style="width:70%;border-bottom:1px solid #000;margin-bottom:10px;margin-top: 40px;"></div>
												<div style="margin-top:-11px;">Date : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; / &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; / &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; / </div>
											</td>
											<td colspan="2" align="center"></td>
										</tr>
									</table>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		<?php /*if($print==0){?>
			<hr style="border:1px dotted #000;" />
		<?php }*/}?>
	</div>	
</div>
<script type="text/javascript">
dojo.ready(function(){
	//readMoneyInKhmer(111);
});	
function readMoneyInKhmer(netTotal){
	var str = netTotal.toString();
    str_cent = 'សេន';
	first_decimal = str.substr(-2);
	last_decimal = str.substr(-1);
    if(first_decimal>0){string='និង';}else{string="";str_cent=""}
	if(first_decimal!='00' && first_decimal<10 ){str_zero = "សូន្យ";}else{str_zero='';}
    first_money_decimal = read_in_khmer_from_10_to_99(first_decimal);
    last_money_decimal = read_in_khmer_from_0_to_9(last_decimal)
    money_khmer=read_money_in_khmer(netTotal);

    if(first_decimal>0){string_en='និង';}else{string_en="";str_cent_en=""}
	if(first_decimal!='00' && first_decimal<10 ){str_zero_en = "Zero";}else{str_zero_en='';}
    first_money_decimal_en = read_in_english_from_10_to_99(first_decimal);
    last_money_decimal_en = read_in_english_from_0_to_9(last_decimal)
    money_english=read_money_in_english(netTotal);
    read_eng = money_english.trim()+string+ first_money_decimal+str_zero+last_money_decimal+'ដុល្លារគត់'

    read_eng = '( '+money_english.trim()+string_en+ first_money_decimal_en+str_zero_en+last_money_decimal_en+' Dollar Only )'
    dojo.byId("lbl_moneykhmer").innerHTML = money_khmer.trim()+string+ first_money_decimal+str_zero+last_money_decimal+'ដុល្លារគត់'+read_eng
}
</script>