<?php
	$_dbgb = new Application_Model_DbTable_DbGlobal();
	$tr = Application_Form_FrmLanguages::getCurrentlanguage();
	echo $this->headTitle($tr->translate('EDIT_STUDENT_REGISTER')); 
	$frm = $this->frm;
?>
<style>
.image-box {
    text-align: center;
}
.image-box img {
    width: 165px;
    height: 185px;
}
.button_browse {
    position: relative;
    overflow: hidden;
    text-align: center;
    width: 100%;
    height: 38px;
    background: #fbf9f9;
    border: 1px solid #e8e8e8;
}
.button_browse span {
    line-height: 33px;
    font-weight: 600;
    cursor: pointer;
}
input.btn_borwse_image {
    position: absolute;
    width: 100%;
    height: 38px;
    top: 0;
    left: 0;
    z-index: 2;
    opacity: 0;
    cursor: pointer;
}
.account-image {
    border: solid 1px #eee;
    width: 165px;
    margin: 0 auto;
}
.bd-bg {
    background: #f7f7f7;
    padding: 5px 10px;
    border: solid 1px #062b61;
    margin-bottom: 10px;
}
.bd-bg .form-group {
    margin-bottom: 0;
}
table#table_row tr td {
    padding: 5px 2px;
    background: #f7f7f7;
}
table#table_row_study tr td {
    padding: 5px 0px;
    border-bottom: solid 1px #eee;
}

.form-group.audioBlog{
	padding: 10px;
    background: #02014a;
    color: #fff;
    border-radius: 10px;
}
.displaynone{
	display: none;
}
</style>
<script src="<?php echo $this->baseUrl();?>/js/help.js"  type="text/javascript"></script>
<div class="card">
	<div class="card-content collapse show">
		<form id="add_student" dojoType="dijit.form.Form" method="post" enctype="multipart/form-data">
			<script type="dojo/method" event="onSubmit">			
			if(this.validate()) {
  				branch_id = dijit.byId('branch_id').get('value');
				if(branch_id==''){
					dijit.byId('branch_id').focus();
					return false;
				}
				if(isDuplicate==1){
					alert("<?php echo $tr->translate("ALREADY_EXISTING_STUDENT_CODE");?>");
					dijit.byId("student_id").focus();
					return false;
				}
				if(duplicateStudent==1){
					alert("<?php echo $tr->translate("ALREADY_EXISTING_RECORD_STUDENT");?>");
					return false;
				}
				var identity_study = $('#identity_study').val();
				if(identity_study==''){
					alert("<?php echo $tr->translate("PLEASE_SET_STUDY_INFORMATION");?>");
					dijit.byId("degree").focus();
					return false;
				}

				var arrays = identity_study.split(',');
				if(arrays.length>0){
					var checkIsMain  = 0;
					var selValueByClass = $("input[type='radio'][name='is_main']:checked").val();
					if(selValueByClass !== undefined){
						checkIsMain=1;
					}
					if(checkIsMain==0){
						alert("<?php echo $tr->translate("PLEASE_SET_STUDY_INFORMATION_IS_MAIN_GRADE");?>");
						return false;
					}
				}
				loadingBlock();
				return true;
			}else {
				return false;
			}
			</script>
			<div class="card-box">
               	<div class="col-sm-12 border-botom pd-0">
		    		<div class="col-sm-8 ">
		    			<h4 class="m-b-0"><i class="fa fa-edit" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<?php echo $tr->translate('EDIT_STUDENT_REGISTER');?></h4>
	    				<span id="message"></span>
	    			</div>
	    			<div class="col-sm-4 pd-0 text-right">
	    			</div>
	    			<div class="clearfix"></div>
	    		</div>
	    	</div>
	    	<!-- Tab Menu -->
	    	<div class="card-box">
	    		 <ul class="nav  md-pills pills-primary nav-tab" role="tablist">
		            <li class="nav-item active">
		                <a class="nav-link " data-toggle="tab" href="#panel21" role="tab"><i class="fa fa-user ml-2"></i> <?php echo $tr->translate("STUDENT_INFO");?></a>
		            </li>
		            <li class="nav-item">
		                <a class="nav-link" data-toggle="tab" href="#panel24" role="tab">
		                <i class="fa fa-users ml-2"></i> <?php echo $tr->translate("STUDY_INFO");?>
		                </a>
		            </li>
		            <li class="nav-item">
		                <a class="nav-link" data-toggle="tab" href="#panel22" role="tab">
		                <i class="fa fa-users ml-2"></i> <?php echo $tr->translate("PARENT_INFO");?>
		                </a>
		            </li>
					<li class="nav-item">
		                <a class="nav-link" data-toggle="tab" href="#panel23" role="tab">
		                <i class="fa fa-users ml-2"></i> <?php echo $tr->translate("OTHER_INFOMATION");?>
		                </a>
		            </li>
		        </ul>
		    </div>
		    <!--/. Tab Menu -->
		    <div class="col-md-12">
		        <!-- Tab panels -->
		        <div class="tab-content vertical">
			        <!--Panel 1-->
			        <div class="tab-pane fade in active" id="panel21" role="tabpanel">
			        	 <div class="card-box">
				        	<div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="glyphicon glyphicon-user" aria-hidden="true"></i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("STUDENT_INFO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
						                   <label class="control-label bold col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("STUDENT_NAMEKHMER");?> <span class="required">*</span> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("name_kh");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label bold col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("Last Name");?> <span class="required">*</span> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("last_name");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label bold col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("First Name");?> <span class="required">*</span> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("name_en");?>
						                   </div>
						                </div>
						                 <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("SEX");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("sex");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DOB");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("date_of_birth");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHONE");?> <input type="radio" data-dojo-type="dijit/form/RadioButton" name="primary_phone" value="1" <?php //if($this->rs['primary_phone']==1){echo "checked";}?> /> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("phone");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NATION");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="nation" />
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NATIONALITY");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="studen_national" />
						                   </div>
						                </div>
						                
					              </div>
					            </div>
				            </div>
				            <div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
													place
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("ADDRESS_INFO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("POB");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("pob");?>
						                   </div>
						                </div>
						                <div class="d-flex"> 
											<div class="settings-main-icon ">
												<i class="material-icons-outlined">
												map
												</i>
											</div> 
											<div class="col-md-6 col-sm-6 col-xs-12"> 
												<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("CURRENT_ADDRESS");?></p>
											</div> 
											<div class="col-md-6 col-sm-6 col-xs-12">
												<input type="button" label="<?php echo $tr->translate('REFRESH');?>" dojoType="dijit.form.Button" onclick="AllRefresh();" class="button-class button-warning" iconClass="glyphicon glyphicon-refresh" />
											</div>
										</div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NUMBER_HOME");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("home_note");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("STREET");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("way_note");?>
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("CITY_PROVINCE");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("student_province");?>
						                   </div>
						                </div>
						                 <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DISTRICT");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="distric_note"  />
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("COMMUNE");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="commun_note"  />
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("VILLAGE");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="village_note"  />
						                   </div>
						                </div>
						            </div>
						          </div>    
				            </div>
				           <div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
													add_a_photo
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("PHOTO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
							                <label class="control-label bold col-md-5 col-sm-5 col-xs-12"  style="line-height: 7.75;"><?php echo $tr->translate("PHOTO");?>
						                   </label>
						                  <div class="col-md-7 col-sm-7 col-xs-12">
						                    	<div class="account-image text-center">
													<div class="image-box">
														<?php 
														$image = $this->baseUrl().'/images/no-profile.png';
														if(!empty($this->rs['photo'])){
															if (file_exists(PUBLIC_PATH."/images/photo/".$this->rs['photo'])){
																$image = $this->baseUrl().'/images/photo/'.$this->rs['photo'];
															}
															
														}?>
														<img id="profile_wiew" src="<?php echo $image;?>" alt=""  />
													</div>
													<div class="button_browse">
													<div id='preview'></div>	
															<span>Upload <span ><i class="fa fa-camera" aria-hidden="true"></i></span></span>
															<input class="btn_borwse_image" type="file" id="photo" name="photo"  />
															<input type="hidden" name="old_photo" value="<?php echo $this->rs['photo'];?>" id="old_photo" dojoType="dijit.form.TextBox" />
													</div>
												</div>
						                   </div>
						                </div>
										
										<div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
													perm_camera_mic
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("STUDENT_NAMEASAUDIO");?></p>
												</div> 
											</div>
										</div>
										<div class="form-group audioBlog">
							                <label class="control-label bold col-md-3 col-sm-3 col-xs-12"><?php echo $tr->translate("AUDIO");?>
						                   </label>
						                  <div class="col-md-9 col-sm-9 col-xs-12">
												<input type='file' id="audiofile" name="audiofile" accept="audio/*" placeholder="" class="profile-aud">
										   </div>
						                
											<div id="app"></div>
										</div>
										
						            </div>
								 </div>						            
				            </div>
			            </div>
			        </div>
			        <!--/.Panel 1-->
			        
			        <!--Panel 2-->
			        <div class="tab-pane fade in " id="panel22" role="tabpanel">
			        	 <div class="card-box">
				        	<div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
														people_outline
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("FATHER_INFO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
										   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("FATHER_NAME");?>  :
										   </label>
										   <div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement("father_khname");?>
										   </div>
										</div>
										<div class="form-group">
										   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NAME_IN_LATIN");?>  :
										   </label>
										   <div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement("fa_name_en");?>
										   </div>
										</div>  
							      	   <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DOB");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("fa_dob");?>
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NATIONALITY");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="fa_national" />
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("OCCUPATION");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="fa_job" />
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHONE");?> <input type="radio" data-dojo-type="dijit/form/RadioButton" name="primary_phone" value="2" <?php //if($this->rs['primary_phone']==2){echo "checked";}?> /> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                  		 <?php echo $frm->getElement("fa_phone");?>
						                   </div>
						                </div>
										<div class="form-group">
											<label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHOTO");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                    	<div class="account-image" style="margin:0;">
													<div class="image-box">
														<?php
															$father_photo = $this->baseUrl().'/images/no-profile.png';
															 if (!empty($this->rs['father_photo'])){
																if (file_exists(PUBLIC_PATH."/images/photo/".$this->rs['father_photo'])){
																	$father_photo = $this->baseUrl().'/images/photo/'.$this->rs['father_photo'];
																}
															 }
														?>
														<img id="father_wiew" src="<?php echo $father_photo;?>" alt=""  />
													</div>
													<div class="button_browse">
													<div id='preview'></div>	
															<span>Upload <span ><i class="fa fa-camera" aria-hidden="true"></i></span></span>
															<input class="btn_borwse_image" type="file" id="father_photo" name="father_photo"  />
													</div>
												</div>
						                   </div>
						                </div>
						            </div>
						          </div>    
				             </div>
				             <div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
														people_outline
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("MOTHER_INFO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
										   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("MOTHER_NAME");?>  :
										   </label>
										   <div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement("mother_khname");?>
										   </div>
										</div>
										<div class="form-group">
										   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NAME_IN_LATIN");?>  :
										   </label>
										   <div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement("mom_name_en");?>
										   </div>
										</div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DOB");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("mo_dob");?>
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NATIONALITY");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="mom_nation" />
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("OCCUPATION");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="mo_job" />
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHONE");?> <input type="radio" data-dojo-type="dijit/form/RadioButton" name="primary_phone" value="3" <?php // if($this->rs['primary_phone']==3){echo "checked";}?> /> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("mon_phone");?>
						                   </div>
						                </div>
										<div class="form-group">
											<label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHOTO");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                    	<div class="account-image" style="margin:0;">
													<div class="image-box">
														<?php
															$mother_photo = $this->baseUrl().'/images/no-profile.png';
															 if (!empty($this->rs['mother_photo'])){
																if (file_exists(PUBLIC_PATH."/images/photo/".$this->rs['mother_photo'])){
																	$mother_photo = $this->baseUrl().'/images/photo/'.$this->rs['mother_photo'];
																}
															 }
														?>
														<img id="mother_wiew" src="<?php echo $mother_photo;?>" alt=""  />
													</div>
													<div class="button_browse">
													<div id='preview'></div>	
															<span>Upload <span ><i class="fa fa-camera" aria-hidden="true"></i></span></span>
															<input class="btn_borwse_image" type="file" id="mother_photo" name="mother_photo"  />
													</div>
												</div>
						                   </div>
						                </div>
						             </div>
						           </div>   
				             </div>
				             <div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
														people_outline
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("GUARDIAN_INFO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NAME");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("guardian_khname");?>
						                   </div>
						                </div> 
										<div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NAME_IN_LATIN");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("guardian_name_en");?>
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DOB");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("guardian_dob");?>
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NATIONALITY");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="guardian_national" />
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("OCCUPATION");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="gu_job" />
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHONE");?> <input type="radio" data-dojo-type="dijit/form/RadioButton" name="primary_phone" value="4" <?php //if($this->rs['primary_phone']==4){echo "checked";}?> /> :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("guardian_phone");?>
						                   </div>
						                </div>
										<div class="form-group">
											<label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHOTO");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                    	<div class="account-image" style="margin:0;">
													<div class="image-box">
														<?php
															$guardian_photo = $this->baseUrl().'/images/no-profile.png';
															 if (!empty($this->rs['guardian_photo'])){
																if (file_exists(PUBLIC_PATH."/images/photo/".$this->rs['guardian_photo'])){
																	$guardian_photo = $this->baseUrl().'/images/photo/'.$this->rs['guardian_photo'];
																}
															 }
														?>
														<img id="guardian_wiew" src="<?php echo $guardian_photo;?>" alt=""  />
													</div>
													<div class="button_browse">
													<div id='preview'></div>	
															<span>Upload <span ><i class="fa fa-camera" aria-hidden="true"></i></span></span>
															<input class="btn_borwse_image" type="file" id="guardian_photo" name="guardian_photo"  />
													</div>
												</div>
						                   </div>
						                </div>
						             </div>
						          </div>
						        </div>
				         </div>
			        </div>
			        <!--/.Panel 2-->
					
			        <!--Panel 3-->
			        <div class="tab-pane fade in " id="panel23" role="tabpanel">
			        	 <div class="card-box">
				        	<div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
														menu_book
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("OTHER_INFOMATION");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" >
												<?php echo $tr->translate("ENGLISH_LANGUAGE_LEVEL");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
												<input id="lang_level" />
						                   </div>
						                </div> 
							      	   <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("FROM_SCHOOL");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("from_school");?>
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("KNOW_BY");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="know_by" />
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("SPONSER");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<?php echo $frm->getElement("sponser");?>
						                   </div>
						                </div> 
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PHONE");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                  		 <?php echo $frm->getElement("sponser_phone");?>
						                   </div>
						                </div>
						                <div class="displaynone">
							                <div class="form-group">
							                   <label class="control-label col-md-12 col-sm-12 col-xs-12 title-blog bold" ><i class="fa fa-hand-o-right" aria-hidden="true"></i> <?php echo $tr->translate("BACCII_INFOMATION");?></label>
							                </div>
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DATE_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("date_baccexam");?>
							                   </div>
							                </div> 
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("SCOOL_BACCPROVINCE");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("school_province");?>
							                   </div>
							                </div>
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("CENTER_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("center_baccexam");?>
							                   </div>
							                </div>
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("ROOM_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("room_baccexam");?>
							                   </div>
							                </div> 
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("TABLE_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("table_baccexam");?>
							                   </div>
							                </div>
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("GRADE_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("grade_baccexam");?>
							                   </div>
							                </div>
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("SCORE_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("score_baccexam");?>
							                   </div>
							                </div>
							                <div class="form-group">
							                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("CERTIFICATE_BACCEXAM");?>  :
							                   </label>
							                   <div class="col-md-7 col-sm-7 col-xs-12">
							                  		 <?php echo $frm->getElement("certificate_baccexam");?>
							                   </div>
							                </div> 
							             </div>
							          </div>
							        </div>
				             </div>
							 <div class="col-md-8 col-sm-8 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
						               	  <div class="form-group">
												<div class="d-flex"> 
													<div class="settings-main-icon ">
														<i class="material-icons-outlined">
															library_books
														</i>
													</div> 
													<div class="col-md-4 col-sm-4 col-xs-12"> 
														<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("DOCUMENT_INFO");?></p>
													</div> 
													<div class="col-md-6 col-sm-6 col-xs-12"> 
														<input class="button-class button-warning" iconClass="glyphicon glyphicon-trash" type="button" label="<?php echo $tr->translate('CLEAR_ALL');?>" dojoType="dijit.form.Button" onclick="deleteAllRow();" />
													</div> 
												</div>
											</div>
										<div class="form-group">
											<div class="col-md-12 col-sm-12 col-xs-12" style=" height: 400px;  overflow-y: auto; overflow-x: hidden;">
												<table width="100%" border="1" id="table_row" style="border-collapse: collapse; border:1px solid #ccc;white-space: nowrap;">
													<tr id="head-title" class="head-td"  align="right" style="font-size:12px;"></tr>
												</table>
												<input type="button" class="button-class button-warning"  iconClass="glyphicon glyphicon-sort-by-attributes" label="<?php echo $tr->translate('ADD_ROW');?>" dojoType="dijit.form.Button" onclick="addRow();" />
														
												<input type="hidden" id="identity" name="identity" />
												<input type="hidden" id="popup_index" name="popup_index" />
											</div>		
										</div>
									</div>
								</div>
							 </div>
				         </div>
			        </div>
			        <!--/.Panel 3-->
			        
			        <!--Panel 4-->
			        <div class="tab-pane fade in " id="panel24" role="tabpanel">
			        	 <div class="card-box">
							<div class="col-md-4 col-sm-4 col-xs-12">
								<div class="card-blogform">
									<div class="card-body">
						               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
														school
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("STUDY_INFO");?></p>
												</div> 
											</div>
										</div>
					                <div class="form-group">
						                <label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("BRANCH");?> <span class="required">*</span> :</label>
						                <div class="col-md-7 col-sm-7 col-xs-12">
						                	<?php echo $frm->getElement("branch_id");?>
						                	<?php echo $frm->getElement("id");?>
						                </div>
						             </div>
						             <div class="form-group">
					                   <label class="control-label bold col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("STUDENT_TYPE");?> <span class="required">*</span> :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   		<?php echo $frm->getElement("stu_denttype");?>
					                   </div>
					                </div>
					                <div class="form-group">
					                   <label class="control-label bold  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("STUDENT_ID");?> <span class="required">*</span> :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   		<?php echo $frm->getElement("student_id");?>
					                   </div>
					                </div>
					                <?php if (EDUCATION_LEVEL==1){?>
					                <div class="form-group">
					                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("CULTURE_LEVEL");?>  :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   		<?php echo $frm->getElement("calture");?>
					                   </div>
					                </div>  
					                <?php }?>
					                <div class="form-group">
					                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("STATUS");?>  :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   		<?php echo $frm->getElement("status");?>
					                   </div>
					                </div>
					               </div>
					              </div>
				            </div>
				            <div class="col-md-4 col-sm-4 col-xs-12">
				                <div class="card-blogform">
									<div class="card-body">
					               	  <div class="form-group">
											<div class="d-flex"> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">
														local_atm
													</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("SCHOOL_OPTIONS_INFO");?></p>
												</div> 
											</div>
										</div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("ACADEMIC_YEAR");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   		<input id="academic_year" />
						                   </div>
						                </div>
						                <div class="form-group">
						                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("REMARK");?>  :
						                   </label>
						                   <div class="col-md-7 col-sm-7 col-xs-12">
						                   <?php echo $frm->getElement("remark");?>
						                   </div>
						                </div>
						              </div>
						           </div>  
				            </div>
				            <div class="col-md-4 col-sm-4 col-xs-12">
				            	<div class="displaynone">
					            	<div class="form-group">
					                   <label class="control-label col-md-12 col-sm-12 col-xs-12 title-blog bold" ><i class="fa fa-graduation-cap" aria-hidden="true"></i> <?php echo $tr->translate("SCHOLARSHIP");?></label>
					                </div>
					                <div class="form-group">
					                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DISCOUNT_TYPE");?>  :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   <?php echo $frm->getElement("discount_type");?>
					                   </div>
					                </div> 
					                
					                <div class="form-group">
					                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("SCHOLASHIP");?>  :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   <?php echo $frm->getElement("scholarship_amount");?>
					                   </div>
					                </div> 
					                <div class="form-group">
					                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("FROM_DATE");?>  :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   <?php echo $frm->getElement("scholarship_fromdate");?>
					                   </div>
					                </div> 
					                <div class="form-group">
					                   <label class="control-label  col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("TO_DATE");?>  :
					                   </label>
					                   <div class="col-md-7 col-sm-7 col-xs-12">
					                   <?php echo $frm->getElement("scholarship_todate");?>
					                   </div>
					                </div> 
				                </div>
				            </div>
						</div>
						<div class="card-box">
							<div class="col-md-12 col-sm-12 col-xs-12">
								<div class="bd-bg">
					                <div class="form-group">
					                    <div class="col-md-3 col-sm-3 col-xs-12">
					                   		<input id="degree" />
					                    </div>
					                    <div class="col-md-3 col-sm-3 col-xs-12">
					                   		<input id="grade" />
					                    </div>
					                    <div class="col-md-3 col-sm-3 col-xs-12">
					                   		<input id="group" />
					                    </div>
					                     <div class="col-md-3 col-sm-3 col-xs-12">
					                     	<input dojoType="dijit.form.TextBox" class="fullside" name="recordEdit" id="recordEdit" value="" type="hidden">
					                     	<input dojoType="dijit.form.TextBox" class="fullside" name="rowIndex" id="rowIndex" value="" type="hidden">
					                   		<input class="button-class button-warning" iconClass="glyphicon glyphicon-sort-by-attributes" type="button" label="<?php echo $tr->translate('Add Study Record');?>" dojoType="dijit.form.Button" onclick="addRowStudy();" />
					                    </div>
					                </div>
									<div class="form-group">
						         	 	<table id="table_row_study" style="border-collapse: collapse; border:1px solid #ccc;">
											<tr id="head-title_study" class="head-td" align="right" style="white-space:nowrap;"></tr>
										</table>
										<input type="hidden" name="identity_study" id="identity_study"  />
						         	 </div>
				                 </div>
							</div>
						</div>
				     </div>
				     <!--/.Panel 4-->
			    </div>
			    <!--/. Tab panels -->
			</div>
			<div class="clearfix"></div>
		    <div class="card-box">
               	<div class="col-sm-12 border-top mt-20 ptb-10 text-center">
					<input type="reset" class="button-class button-danger" iconClass="glyphicon glyphicon-repeat"  value="សំអាត" label="<?php echo $tr->translate('CLEAR');?>" dojoType="dijit.form.Button" />
					<input type="submit" class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" value="save_close" id="save_close" name="save_close" label="<?php echo $tr->translate('GO_EDIT');?>" dojoType="dijit.form.Button"  />
	    		</div>
	    	</div>
		</form>
	</div>
</div>
<div class="dijitHidden">
	<div data-dojo-type="dijit.Dialog" style="width:500px;" id="popup_dept2" >
		<form style="background-color: buttonface;" id='frm_add_tran1' dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<table cellspacing="10" width="100%" style="margin: 0 auto;">
			<tr>
				<td>
					<fieldset style="background-color: buttonface;">
					<legend align="center" ><?php echo $tr->translate('ADD_OCCUPATION');?></legend>
						<table style="margin: 0 auto; width: 100%;  padding:10px; line-height: 35px;" cellspacing="7" >
							<tr>
								<td><?php echo $tr->translate('TITLE');?></td>
								<td><input dojoType="dijit.form.ValidationTextBox" required="true"  class="fullside" id="occu_name" name="occu_name" value="" type="text"></td>
							</tr>
							<tr style="display: none;">
								<td><?php echo $tr->translate('STATUS');?></td>
								<td><select name="status_j" id="status_j" dojoType="dijit.form.FilteringSelect"   class="fullside">
	    								<option value="1" ><?php echo $tr->translate('ACTIVE');?></option>
	    								<option value="0" ><?php echo $tr->translate('DEACTIVE');?></option>
									</select>
								</td>
							</tr>
							<input type="hidden" name="" id="value_j" dojoType="dijit.form.TextBox" />
							<tr>
								<td colspan="4" align="center">
									<input class="button-class button-danger" iconClass="glyphicon glyphicon-off" type="button" value="ចាកចេញ" label="<?php echo $tr->translate('CLOSE');?>" id="close" name="close" dojoType="dijit.form.Button" onclick="hideDialog1();"/>
									<input class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" type="button" value="save" label="<?php echo $tr->translate('SAVE');?>" id="save" name="save" dojoType="dijit.form.Button"  onclick="addJob();"/>
								</td>
							</tr>
						</table>
				</fieldset>
				</td>
			</tr>
		</table>
		</form>
	</div>
</div>
<div class="dijitHidden">
	<div data-dojo-type="dijit.Dialog" style="width:500px;" id="popup_nation" >
		<form style="background-color: buttonface;" id='frm_nation_kh' dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<table cellspacing="10" width="100%" style="margin: 0 auto;">
				<tr>
					<td>
						<fieldset style="background-color: buttonface;">
						<legend align="center" ><?php echo $tr->translate('ADD_NATION');?></legend>
							<table style="margin: 0 auto; width: 100%;  padding:10px; line-height:35px;" cellspacing="7" >
								<tr>
								<td><?php echo $tr->translate('KH_NAME');?></td>
								<td><input dojoType="dijit.form.ValidationTextBox" required="true"  class="fullside" id="title_kh" name="title_kh" value="" type="text"></td>
							</tr>
							<tr>
								<td><?php echo $tr->translate('EN_NAME');?></td>
								<td><input dojoType="dijit.form.ValidationTextBox" required="true"  class="fullside" id="title_en" name="title_en" value="" type="text"></td>
							</tr>
							<tr style="display: none;">
								<td><?php echo $tr->translate('STATUS');?></td>
								<td><select name="status_na" id="status_na" dojoType="dijit.form.FilteringSelect"   class="fullside">
	    								<option value="1" ><?php echo $tr->translate('ACTIVE');?></option>
	    								<option value="0" ><?php echo $tr->translate('DEACTIVE');?></option>
									</select>
								</td>
							</tr>
								<tr>
									<td colspan="4" align="center">
										<input class="button-class button-danger" iconClass="glyphicon glyphicon-off" type="button" value="ចាកចេញ" label="<?php echo $tr->translate('CLOSE');?>" id="hide_nation" name="hide_nation" dojoType="dijit.form.Button"  onclick="hideDialog4();"/>
										<input class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" type="button" value="save" label="<?php echo $tr->translate('SAVE');?>" id="save_nation" name="save_nation" dojoType="dijit.form.Button"  onclick="addNationBy();"/>
									</td>
								</tr>
							</table>
						</fieldset>
					</td>
				</tr>
			</table>
		</form>
	</div>
</div>
<div class="dijitHidden">
	<div data-dojo-type="dijit.Dialog" style="width:500px;" id="popup_lang_level" >
		<form style="background-color: buttonface;" id='frm_lang_level' dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<table cellspacing="10" width="100%" style="margin: 0 auto;">
			<tr>
				<td>
					<fieldset style="background-color: buttonface;">
					<legend align="center" ><?php echo $tr->translate('ADD_LANGUAGE_LEVEL');?></legend>
						<table style="margin: 0 auto; width: 100%;  padding:10px;" cellspacing="7" >
							<tr>
								<td><?php echo $tr->translate('TITLE');?></td>
								<td><input dojoType="dijit.form.ValidationTextBox" required="true"  class="fullside" id="title" name="title" value="" type="text"></td>
							</tr>
							
							<tr>
								<td colspan="4" align="center">
									<input class="button-class button-danger" iconClass="glyphicon glyphicon-off" type="button" value="ចាកចេញ" label="<?php echo $tr->translate('CLOSE');?>" id="hide" name="hide" dojoType="dijit.form.Button"  onclick="hideDialog();"/>
									<input class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" type="button" value="save" label="<?php echo $tr->translate('SAVE');?>" id="save_lang" name="save_lang" dojoType="dijit.form.Button"  onclick="addLanguage();"/>
								</td>
							</tr>
						</table>
				</fieldset>
				</td>
			</tr>
		</table>
		</form>
	</div>
</div>
<div class="dijitHidden">
	<div data-dojo-type="dijit.Dialog" style="width:500px;" id="popup_know_by" >
		<form style="background-color: buttonface;" id='frm_know_by' dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<table cellspacing="10" width="100%" style="margin: 0 auto;">
			<tr>
				<td>
					<fieldset style="background-color: buttonface;">
					<legend align="center" ><?php echo $tr->translate('KNOW_BY');?></legend>
						<table style="margin: 0 auto; width: 100%;  padding:10px;" cellspacing="7" >
							<tr>
								<td><?php echo $tr->translate('TITLE');?></td>
								<td><input dojoType="dijit.form.ValidationTextBox" required="true"  class="fullside" id="title_know_by" name="title_know_by" value="" type="text"></td>
							</tr>
							
							<tr>
								<td colspan="4" align="center">
									<input class="button-class button-danger" iconClass="glyphicon glyphicon-off" type="button" value="ចាកចេញ" label="<?php echo $tr->translate('CLOSE');?>" id="hide_know_by" name="hide_know_by" dojoType="dijit.form.Button"  onclick="hideDialog2();"/>
									<input class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" type="button" value="save" label="<?php echo $tr->translate('SAVE');?>" id="save_know_by" name="save_know_by" dojoType="dijit.form.Button"  onclick="addKnowBy();"/>
								</td>
							</tr>
						</table>
				</fieldset>
				</td>
			</tr>
		</table>
		</form>
	</div>
</div>

<div class="dijitHidden">
	<div data-dojo-type="dijit.Dialog" style="width:500px;" id="popup_doc_type" >
		<form style="background-color: buttonface;" id='frm_doc_type' dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<table cellspacing="10" width="100%" style="margin: 0 auto;">
				<tr>
					<td>
						<fieldset style="background-color: buttonface;">
						<legend align="center" ><?php echo $tr->translate('DOCUMENT_TYPE');?></legend>
							<table style="margin: 0 auto; width: 100%;  padding:10px;" cellspacing="7" >
								<tr>
									<td><?php echo $tr->translate('TITLE');?></td>
									<td><input dojoType="dijit.form.ValidationTextBox" required="true"  class="fullside" id="title_doc_type" name="title_doc_type" value="" type="text"></td>
								</tr>
								<tr>
									<td colspan="4" align="center">
										<input class="button-class button-danger" iconClass="glyphicon glyphicon-off" type="button" value="ចាកចេញ" label="<?php echo $tr->translate('CLOSE');?>" id="hide_doc_type" name="hide_doc_type" dojoType="dijit.form.Button"  onclick="hideDialog3();"/>
										<input class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" type="button" value="save" label="<?php echo $tr->translate('SAVE');?>" id="save_doc_type" name="save_doc_type" dojoType="dijit.form.Button"  onclick="addDocType();"/>
									</td>
								</tr>
							</table>
						</fieldset>
					</td>
				</tr>
			</table>
		</form>
	</div>
</div>
<script type="text/javascript">
dojo.require("dojo.data.ItemFileWriteStore");  
dojo.require("dijit.form.NumberTextBox");
dojo.require("dijit.form.DateTextBox");
dojo.require("dijit.form.Textarea");
dojo.require("dojo.NodeList-manipulate");

var language_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode($this->lang_level));?> );
var job_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode($this->occupation));?> );
var group_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode(array()));?> );
var knowby_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode($this->know_by));?> );
var doctype_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode($this->doc_type));?> );

var district_store  = getDataStorefromJSON('id','name', <?php print_r(Zend_Json::encode(array()));?> );
var commune_store  = getDataStorefromJSON('id','name', <?php print_r(Zend_Json::encode(array()));?> );
var village_store  = getDataStorefromJSON('id','name', <?php print_r(Zend_Json::encode(array()));?> );

var degree_store = getDataStorefromJSON('id','name', <?php print_r(Zend_Json::encode(array()));?> );
var nation_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode($this->nation));?> );
dojo.ready(function(){
	new dijit.form.FilteringSelect({
		queryExpr: "*${0}*",
		autoComplete:false,                     
		required: false,                        
	    id: "group",
	    name: "group",  
	    class: 'fullside', 
	    readonly:false,
	    required:false,
	    placeHolder:"<?php echo $tr->translate("SELECT_GROUP");?>",          
	    onChange: function() {  
	    }
	}, "group");
	
	new dijit.form.FilteringSelect({
		store: degree_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: false,
		id: "degree",
		name: "degree",           
		class: "fullside", 
		placeHolder:"<?php echo $tr->translate("SELECT_DEGREE");?>",          
		onChange: function() {  
			getallGrade();
			getAllGroup();
		}
	}, "degree");
	
	new dijit.form.FilteringSelect({
	    queryExpr: "*${0}*",
		autoComplete:false,                     
		required: false,                   
	    id: "grade",
	    name: "grade",  
	    tabindex: "16",  
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_GRADE");?>",          
	    onChange: function() {  
	    	getAllGroup();
	    }
	}, "grade");
	getallGrade();
	
	new dijit.form.FilteringSelect({
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: false,                     
		id: "academic_year",
		name: "academic_year",
		value:'<?php echo $this->currentFee['fee_id'];?>' , 
		class: "fullside", 		
		placeHolder:"<?php echo $tr->translate("SELECT_ACADEMIC_YEAR");?>",          
		onChange: function() {  
			academic_year = dijit.byId('academic_year').get('value');
		}
	}, "academic_year");
	initialize();
	new dijit.form.FilteringSelect({
		store: job_store,
		autoComplete:false,
		queryExpr:'*${0}*',                         
	    id: "fa_job",
	    name: "fa_job",  
	    tabindex: "17",         
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_JOB");?>", 
	    onChange: function() {          
	   	fa_job = dijit.byId('fa_job').get('value');
	    if(fa_job==-1){
	    	dijit.byId("save").attr("disabled",false);
	   	 	dijit.byId("popup_dept2").show();
		   	dijit.byId('value_j').attr('value',1);
	    }
	    else {
	    }  
	   } 
	}, "fa_job");
	dijit.byId('fa_job').attr('value',"<?php echo $this->rs['father_job']?>");
	fa = dijit.byId('fa_job').get('value');
	if(fa==''){
		dijit.byId('fa_job').attr('value',0);
	}

	new dijit.form.FilteringSelect({
		store: job_store,
		autoComplete:false,
		queryExpr:'*${0}*',                         
	    id: "mo_job",
	    name: "mo_job",  
	    tabindex: "17",         
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_JOB");?>", 
	    onChange: function() {          
	   	mo_job = dijit.byId('mo_job').get('value');
	    if(mo_job==-1){
	     dijit.byId("save").attr("disabled",false);
	   	 dijit.byId("popup_dept2").show();
		   	dijit.byId('value_j').attr('value',2);
	     }
	    else {
	    }  
	   } 
	}, "mo_job");
	
	dijit.byId('mo_job').attr('value',"<?php echo $this->rs['mother_job']?>");
	mo = dijit.byId('mo_job').get('value');
	if(mo==''){
		dijit.byId('mo_job').attr('value',0);
	}
	new dijit.form.FilteringSelect({
		store: job_store,
		autoComplete:false,
		queryExpr:'*${0}*',                        
	    id: "gu_job",
	    name: "gu_job",  
	    tabindex: "17",         
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_JOB");?>", 
	    onChange: function() {          
	   	mo_job = dijit.byId('gu_job').get('value');
	    if(mo_job==-1){
	     dijit.byId("save").attr("disabled",false);
	   	 dijit.byId("popup_dept2").show();
		   	dijit.byId('value_j').attr('value',3);
	     }
	    else {}  
	   } 
	}, "gu_job");
	dijit.byId('gu_job').attr('value',"<?php echo $this->rs['guardian_job']?>");
	fa = dijit.byId('gu_job').get('value');
	if(fa==''){
		dijit.byId('gu_job').attr('value',0);
	}
	
	new dijit.form.FilteringSelect({
		store: language_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: false,                        
	    id: "lang_level",
	    name: "lang_level",  
	    tabindex: "17",         
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_LANGUAGE_LEVEL");?>", 
	    onChange: function() {          
			lang_level = dijit.byId('lang_level').get('value');
			if(lang_level==-1){
				dijit.byId("popup_lang_level").show();
			}
	    } 
	}, "lang_level");
	dijit.byId('lang_level').attr('value',"<?php echo $this->rs['lang_level']?>");
	lang_level = dijit.byId('lang_level').get('value');
	if(lang_level==''){
		dijit.byId('lang_level').attr('value',0);
	}
	
	new dijit.form.FilteringSelect({
		store: knowby_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: false,                        
	    id: "know_by",
	    name: "know_by",  
	    tabindex: "17",         
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT");?>", 
	    onChange: function() {          
	   	know_by = dijit.byId('know_by').get('value');
	    if(know_by==-1){
			dijit.byId("popup_know_by").show();
	    }
	   } 
	}, "know_by");
	dijit.byId('know_by').attr('value',"<?php echo $this->rs['know_by']?>");
	know_by = dijit.byId('know_by').get('value');
	if(know_by==''){
		dijit.byId('know_by').attr('value',0);
	}

	new dijit.form.FilteringSelect({
		store: nation_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: true,
	    id: "nation",
	    name: "nation",  
	    queryExpr: "*${0}*",
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_NATION");?>", 
	    onChange: function() {          
	    nation = dijit.byId('nation').get('value');
	    if(nation==-1){
	     dijit.byId("save_nation").attr("disabled",false);
	   	 dijit.byId("popup_nation").show();
		   	dijit.byId('value_j').attr('value',1);
	     }
	    
	   } 
	}, "nation");
	
	nation = dijit.byId('nation').get('value');
	if(nation==''){
		dijit.byId('nation').attr('value',0);
	}
	 

	new dijit.form.FilteringSelect({
		store: nation_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: true,
	    id: "studen_national",
	    name: "studen_national",  
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_NATION");?>", 
	    onChange: function() {          
	   	stu_nation = dijit.byId('studen_national').get('value');
	    if(stu_nation==-1){
	     dijit.byId("save_nation").attr("disabled",false);
	   	 dijit.byId("popup_nation").show();
		   	dijit.byId('value_j').attr('value',2);
	     }
	     
	   } 
	}, "studen_national");
	
	nation = dijit.byId('studen_national').get('value');
	if(nation==''){
		dijit.byId('studen_national').attr('value',0);
	}
	
	new dijit.form.FilteringSelect({
		store: nation_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: true,
	    id: "fa_national",
	    name: "fa_national",  
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_NATION");?>", 
	    onChange: function() {          
	    fa_nation = dijit.byId('fa_national').get('value');
	    if(fa_nation==-1){
	     dijit.byId("save_nation").attr("disabled",false);
	   	 dijit.byId("popup_nation").show();
		   	dijit.byId('value_j').attr('value',3);
	     }
	   
	   } 
	}, "fa_national");
	
	fa_nation = dijit.byId('fa_national').get('value');
	if(fa_nation==''){
		dijit.byId('fa_national').attr('value',0);
	}

	new dijit.form.FilteringSelect({
		store: nation_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: true,
	    id: "mom_nation",
	    name: "mom_nation",  
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_NATION");?>", 
	    onChange: function() {          
	    mom_nation = dijit.byId('mom_nation').get('value');
	    if(mom_nation==-1){
	     dijit.byId("save_nation").attr("disabled",false);
	   	 dijit.byId("popup_nation").show();
		   	dijit.byId('value_j').attr('value',4);
	     }
	   
	   } 
	}, "mom_nation");
	
	mom_nation = dijit.byId('mom_nation').get('value');
	if(mom_nation==''){
		dijit.byId('mom_nation').attr('value',0);
	} 

	new dijit.form.FilteringSelect({
		store: nation_store,
		queryExpr: "*${0}*",
		autoComplete: false,                     
		required: true,
	    id: "guardian_national",
	    name: "guardian_national",  
	    class: 'fullside',  
	    placeHolder:"<?php echo $tr->translate("SELECT_NATION");?>", 
	    onChange: function() {          
	   	gurdian_nation = dijit.byId('guardian_national').get('value');
	    if(gurdian_nation==-1){
	     dijit.byId("save_nation").attr("disabled",false);
	   	 dijit.byId("popup_nation").show();
		   	dijit.byId('value_j').attr('value',5);
	     }
	  
	   } 
	}, "guardian_national");
	
	guardian_nation = dijit.byId('guardian_national').get('value');
	if(guardian_nation==''){
		dijit.byId('guardian_national').attr('value',0);
	}
	
	new dijit.form.FilteringSelect({
		store: district_store,
		autoComplete:false,
		queryExpr:'*${0}*',
		required: false,		           
		name: "distric_note",
		id: "distric_note",
		searchAttr: "name",
		class: 'fullside',
		missingMessage:"អ្នក​ភ្លេច​បំពេញ​ ឈ្មោះ ស្រុក/ខ័ណ្ឌ!",	
			onChange: function() {
				distric_note = dijit.byId('distric_note').get('value');
				if(distric_note==-1){
					window.open('<?php echo Zend_Controller_Front::getInstance()->getBaseUrl()."/global/district/add?rightclick=true";?>','_blank');
				}
					filterCommune();
			}  
		}, "distric_note");
		 
		new dijit.form.FilteringSelect({
		store: commun_note,
		autoComplete:false,
		queryExpr:'*${0}*',
		required: false,		           
		name: "commun_note",
		id: "commun_note",
		searchAttr: "name",
		class: 'fullside',
		missingMessage:"អ្នក​ភ្លេច​បំពេញ​ ឃុំ/សង្កាត់",	
			onChange: function() {
				commun_note = dijit.byId('commun_note').get('value');
				if(commun_note==-1){
					window.open('<?php echo Zend_Controller_Front::getInstance()->getBaseUrl()."/global/commune/add?rightclick=true";?>','_blank');
				}
				else{
					filterVillage();
				}
	  }
		}, "commun_note");
		 
		new dijit.form.FilteringSelect({
		store: village_store,
		autoComplete:false,
		queryExpr:'*${0}*',
		required: false,		           
		name: "village_note",
		id: "village_note",
		searchAttr: "name",
		class: 'fullside',
		missingMessage:"អ្នក​ភ្លេច​បំពេញ​ ឈ្មោះភូមិ!",	
			onChange: function() {
				vill = dijit.byId('village_note').get('value');
				if(vill==-1){
					window.open('<?php echo Zend_Controller_Front::getInstance()->getBaseUrl()."/global/village/add?rightclick=true";?>','_blank');
				}
			}
		}, "village_note");
		filterDistrict();


	var branch_id = dijit.byId('branch_id');
	 branch_id.on('change', function(evt) {
		 getRefreshGroup();
    });
	getRefreshGroup();


	setTimeout(function () {
		loadingBlock();
		//checkDuplicateRecord();
		HideloadingBlock();
    }, 500);
}); 

dojo.ready(function(){
	var student_id = dijit.byId('student_id');
	 	student_id.on('keyUp', function(evt) {
		//checkDuplicateRecord();
	});

	 var name_kh = dijit.byId('name_kh');
	 name_kh.on('keyUp', function(evt) {
		 //checkDuplicateStudent();
	});
	 var sex = dijit.byId('sex');
	 sex.on('change', function(evt) {
		 //checkDuplicateStudent();
	});
	 var date_of_birth = dijit.byId('date_of_birth');
	 date_of_birth.on('change', function(evt) {
		 //checkDuplicateStudent();
	});

	 var branch_id = dijit.byId('branch_id');
	 branch_id.on('change', function(evt) {
		 getRefreshItems();
    });

	 getRefreshItems();	
	 initializeStudy();
	 getAllNation();
	 getAllJob();

	 dijit.byId('nation').attr('value',"<?php echo $this->rs['nation']?>");
	dijit.byId('studen_national').attr('value',"<?php echo $this->rs['nationality']?>");
	dijit.byId('fa_national').attr('value',"<?php echo $this->rs['father_nation']?>");
	dijit.byId('mom_nation').attr('value',"<?php echo $this->rs['mother_nation']?>");
	dijit.byId('guardian_national').attr('value',"<?php echo $this->rs['guardian_nation']?>");

});

function getAllJob(){ 
	var url_getjob = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"getalljob"));?>';										
	dojo.xhrPost({
		url: url_getjob,
		content:{
			'addNew':1
			},
		handleAs:"json",
		load: function(data) {
			var job_store  = getDataStorefromJSON('id','name', data);
			dijit.byId('fa_job').set('store',job_store);  
			dijit.byId('mo_job').set('store',job_store);  
			dijit.byId('gu_job').set('store',job_store); 
		},
		error: function(err) {
			console.log(err);
		}
	});
}

function getAllNation(){ 
	var url_getnation = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"getallnation"));?>';										
	dojo.xhrPost({
		url: url_getnation,
		content:{
			'addNew':1
			},
		handleAs:"json",
		load: function(data) {
			
			var nation_store  = getDataStorefromJSON('id','name', data);
			dijit.byId('nation').set('store',nation_store);  
			dijit.byId('studen_national').set('store',nation_store);  
			dijit.byId('fa_national').set('store',nation_store); 
			dijit.byId('mom_nation').set('store',nation_store); 
			dijit.byId('guardian_national').set('store',nation_store); 
			
		},
		error: function(err) {
			console.log(err);
		}
	});
}

url_getallgroup = '<?php echo $this->url(array('module'=>'foundation','controller'=>'group','action'=>'getallgroup'));?>';
function getAllGroup(){
	dijit.byId('group').reset();
	branch_id = dijit.byId('branch_id').get('value');
	if(branch_id=='' || branch_id==-1){
		var group_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode(array()));?> );
		dijit.byId('group').set('store',group_store);  
		dijit.byId('branch_id').focus();
		return false;
	}
	degree = dijit.byId('degree').get('value');
	if(degree=='' || degree==-1){
		degree ="";
	}
	grade = dijit.byId('grade').get('value');
	if(grade=='' || grade==-1){
		grade ="";
	}
	dojo.xhrPost({
		url: url_getallgroup,
		content:{
			'branch_id':branch_id,
			'degree':degree,
			'grade':grade,
			'noaddnew':1
		},
		handleAs:"json",
		load: function(data) {
		    group_store  = getDataStorefromJSON('id','name', data);
		    dijit.byId('group').set('store',group_store);   
		},
		error: function(err) {
		}
	});
}
function getRefreshItems(){
	dijit.byId('degree').reset();   
	var url_getItems = '<?php echo $this->url(array("module"=>"global","controller"=>"degree","action"=>"refreshitems"));?>';										
	dojo.xhrPost({
		url: url_getItems,
		content:{
			'items_type':1
			},
		handleAs:"json",
		load: function(data) {
			degree_store  = getDataStorefromJSON('id','name', data);
			dijit.byId('degree').set('store',degree_store);  
		    document.getElementsByClassName("overlay")[0].style.display="none";
		},
		error: function(err) {
			document.getElementsByClassName("overlay")[0].style.display="none";
		}
	});
}
var grade_store  = getDataStorefromJSON('id','name', <?php print_r(array())?> );
var url_dept = '<?php echo $this->url(array('module'=>'global','controller'=>'grade','action'=>'get-grade')); ?>';
function getallGrade(){
	dept_id = dijit.byId('degree').get('value');
	if(dept_id==''){return false;}
		dojo.xhrPost({
			url:url_dept,
			content:{
				'dept_id':dept_id,
				'noaddnew':1
				},
			handleAs:"json",
			load: function(data) {
				grade_store  = getDataStorefromJSON('id','name', data);
			    dijit.byId('grade').set('store',grade_store);   
			},
			error: function(err) {
			}
		});
}
var isDuplicate = 0;
var url_duplicate = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"checkstudentcode"));?>';										
function checkDuplicateRecord(){
	student_id = dijit.byId('student_id').get('value');
	if(student_id=='' || student_id==-1){
		dijit.byId('student_id').focus();
		return false;
	}
	id = dijit.byId('id').get('value');
	
	dojo.xhrPost({
		url: url_duplicate,
		content:{
			'student_id':student_id,'id':id,
			},
		handleAs:"json",
		load: function(data) {
			if(data==1){
				isDuplicate = 1;
				alert("<?php echo $tr->translate("ALREADY_EXISTING_STUDENT_CODE");?>");
				$("#message").html('<?php echo '<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> '.$tr->translate("ALREADY_EXISTING_STUDENT_CODE");?> !');
			}else{
				isDuplicate=0;
				$("#message").html('');
			}
			   
		    document.getElementsByClassName("overlay")[0].style.display="none";
		},
		error: function(err) {
			alert(err);
			document.getElementsByClassName("overlay")[0].style.display="none";
		}
	});
	checkDuplicateStudent();
}
var duplicateStudent =0;
var url_duplicateRl = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"checkstudentduplicate"));?>';										
function checkDuplicateStudent(){
	
	dojo.xhrPost({
		url: url_duplicateRl,
		form: dojo.byId("add_student"),
		handleAs:"json",
		load: function(data) {
			if(data==1){
				duplicateStudent = 1;
				alert("<?php echo $tr->translate("ALREADY_EXISTING_RECORD_STUDENT");?>");
				$("#message").html('<?php echo '<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> '.$tr->translate("ALREADY_EXISTING_RECORD_STUDENT");?> !');
			}else{
				duplicateStudent=0;
				$("#message").html('');
			}
		},
		error: function(err) {
		}
	});
}
oldProvinceId = '<?php echo $this->rs['province_id'];?>';
oldDistrict = '<?php echo $this->rs['district_name'];?>';
oldcommune_name = '<?php echo $this->rs['commune_name'];?>';
url_getdistrict = '<?php echo $this->url(array('module'=>'global','controller'=>'district','action'=>'get-district'));?>';
function filterDistrict(){
	pro_id = dijit.byId('student_province').get('value');
	if(pro_id==0){
		return false;}
	dojo.xhrPost({
		url:url_getdistrict,	
		content:{ 
			'pro_id': pro_id
		},
		handleAs:"json",
		load: function(data) {	
			district_store  = getDataStorefromJSON('id','name', data);		
		    dijit.byId('distric_note').set('store', district_store);
		    if(oldProvinceId==pro_id){
		    	dijit.byId('distric_note').set('value', "<?php echo $this->rs['district_name'];?>");
		    }
		    document.getElementsByClassName("overlay")[0].style.display="none";	
		},
		error: function(err) {
			
		}
	});	
}
url_getcommune = '<?php echo $this->url(array('module'=>'global','controller'=>'commune','action'=>'get-commune'));?>';
function filterCommune(){
	distict_id = dijit.byId('distric_note').get('value');
	if(distict_id==0){
		return false;}
	dojo.xhrPost({
		url:url_getcommune,	
		content:{ 
			'district_id': distict_id
		},
		handleAs:"json",
		load: function(data) {	
			commune_store  = getDataStorefromJSON('id','name', data);		
		    dijit.byId('commun_note').set('store', commune_store);
		    if(oldDistrict==distict_id){
		    	dijit.byId('commun_note').set('value', "<?php echo $this->rs['commune_name'];?>");
		    }
		    document.getElementsByClassName("overlay")[0].style.display="none";	
		},
		error: function(err) {
		}
	});
}
url_getvillage = '<?php echo $this->url(array('module'=>'global','controller'=>'village','action'=>'get-allvillage'));?>';
function filterVillage(){
	commune_id = dijit.byId('commun_note').get('value');
	if(commune_id==0){
		return false;}
	dojo.xhrPost({
		url:url_getvillage,	
		content:{ 
			'commune_id': commune_id
		},
		handleAs:"json",
		load: function(data) {	
			village_store  = getDataStorefromJSON('id','name', data);		
		    dijit.byId('village_note').set('store', village_store);
		    if(oldcommune_name==commune_id){
		    	dijit.byId('village_note').set('value', "<?php echo $this->rs['village_name'];?>");
		    }
		    document.getElementsByClassName("overlay")[0].style.display="none";	
		},
		error: function(err) {
			
		}
	});
}

function AllRefresh(){
	loadingBlock();
	student_province = dijit.byId('student_province').get('value');
	if(student_province!=''){
		filterDistrict();
	}
	distric_note = dijit.byId('distric_note').get('value');
	if(distric_note!='' || distric_note!=-1){
		filterCommune();
	}
	commun_note = dijit.byId('commun_note').get('value');
	if(commun_note!='' || commun_note!=-1){
		filterVillage();
	}
	
}
url_getacademic = '<?php echo $this->url(array('module'=>'accounting','controller'=>'fee','action'=>'getfeeid'));?>';
function getAllAcademicByBranch(){
		dijit.byId('academic_year').reset();
		branch_id = dijit.byId('branch_id').get('value');
		if(branch_id=='' || branch_id==-1){
			var academic_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode(array()));?> );
			dijit.byId('academic_year').set('store',academic_store);  
			dijit.byId('branch_id').focus();
			return false;
		}
		dojo.xhrPost({
			url: url_getacademic,
			content:{
				'branch_id':branch_id,
				'selectOption':1
			},
			handleAs:"json",
			load: function(data){
				academic_store  = getDataStorefromJSON('id','name', data);
				dijit.byId('academic_year').set('store',academic_store);  
				dijit.byId('academic_year').attr('value',"<?php echo empty($this->currentFee['fee_id'])?$this->currentFee['fee_id']:$this->currentFee['fee_id'];?>");
			},
			error: function(err) {
				
			}
		});
	}
</script>
<style>
 @media (min-width: 1401px) and (max-width: 1601px){
	#mainTabContainer{
	width: 1400px !important;
   	 display: block;
	}
}
</style>
<script>
var url_add_lang = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"add-langlevel")); ?>';
function addLanguage(){
	if(dijit.byId('frm_lang_level').validate()){	
		dojo.xhrPost({
			url:url_add_lang,
			form: dojo.byId("frm_lang_level"),
			handleAs:"json",
			load: function(data) {
				if(data.addNew= 1){
                      var Itemmake = { 
						id: dijit.byId('title').get('value'),
						name: dijit.byId('title').get('value')
						};
						addDataToSelectbox(dijit.byId('lang_level'), language_store, Itemmake, dijit.byId('title').get('value'));
				}else {

					dijit.byId('lang_level').attr("value", data.id);
				}

			   dijit.byId('frm_lang_level').reset();
			   dijit.byId("popup_lang_level").hide();
			},
			error: function(err) {
			}
		});
	}
}

var url_add_know_by = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"add-knowby")); ?>';
function addKnowBy(){
	if(dijit.byId('frm_know_by').validate()){
		loadingBlock();
		dojo.xhrPost({
			url:url_add_know_by,
			form: dojo.byId("frm_know_by"),
			handleAs:"json",
			load: function(data) {
				if(data.addNew == 1){
					var Itemmake = { 
						id: data.id,
						name: dijit.byId('title_know_by').get('value')
				    };
					addDataToSelectbox(dijit.byId('know_by'), knowby_store, Itemmake, data.id);
				}else{
					
					dijit.byId('know_by').attr("value", data.id);
				}
				dijit.byId('frm_know_by').reset();
				dijit.byId("popup_know_by").hide();
				HideloadingBlock();
			},
			error: function(err) {
			}
		});
	}	
}
var url_add_doc_type = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"add-doctype")); ?>';
function addDocType(){
	if(dijit.byId('frm_doc_type').validate()){
		loadingBlock();
		dojo.xhrPost({
			url:url_add_doc_type,
			form: dojo.byId("frm_doc_type"),
			handleAs:"json",
			load: function(data) {
				var Itemmake = { 
						id: dijit.byId('title_doc_type').get('value'),
						name: dijit.byId('title_doc_type').get('value')
					};
				index = $("#popup_index").val();	   
				addDataToSelectbox(dijit.byId('document_type_'+index), doctype_store, Itemmake, dijit.byId('title_doc_type').get('value'));
				dijit.byId('frm_doc_type').reset();
				dijit.byId("popup_doc_type").hide();
				HideloadingBlock();
			},
			error: function(err) {
			}
		});
	}
}
function hideDialog() {		
	dijit.byId("popup_lang_level").hide();
}
function hideDialog1() {		
	dijit.byId("popup_dept2").hide();
}
function hideDialog2() {		
	dijit.byId("popup_know_by").hide();
}
function hideDialog3() {		
	dijit.byId("popup_doc_type").hide();
}
function hideDialog4() {		
	dijit.byId("popup_nation").hide();
}

var url_add_nation = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"add-nation")); ?>';
function addNationBy(){
	if(dijit.byId('frm_nation_kh').validate()){
		loadingBlock();
		type=dijit.byId('value_j').get('value');
		nation=dijit.byId('nation').get('value');
		studen_national=dijit.byId('studen_national').get('value');
		fa_national=dijit.byId('fa_national').get('value');
		mom_nation=dijit.byId('mom_nation').get('value');
		guardian_national=dijit.byId('guardian_national').get('value');
		dojo.xhrPost({
			url:url_add_nation,
			form: dojo.byId("frm_nation_kh"),
			handleAs:"json",
			load: function(data) {
				var Itemmake = { 
							id: data.id,
							name: dijit.byId('title_kh').get('value')
					   };
				if(type==1){	  
					if(data.addNew == 1){
						addDataToSelectbox(dijit.byId('nation'), nation_store, Itemmake, data.id);	
					}else{
						dijit.byId('nation').attr('value', data.id);
					}
					
				}else if(type==2){
					if(data.addNew == 1){
						addDataToSelectbox(dijit.byId('studen_national'), nation_store, Itemmake, data.id);	
					}else{
						dijit.byId('studen_national').attr('value', data.id);
					}
						
				}else if(type==3){
					if(data.addNew == 1){
						addDataToSelectbox(dijit.byId('fa_national'), nation_store, Itemmake, data.id);	
					}else{
						dijit.byId('fa_national').attr('value', data.id);
					}
					
				}else if(type==4){
					if(data.addNew == 1){
						addDataToSelectbox(dijit.byId('mom_nation'), nation_store, Itemmake, data.id);	
					}else{
						dijit.byId('mom_nation').attr('value', data.id);
					}
					
				}else if(type==5){
					
					if(data.addNew == 1){
						addDataToSelectbox(dijit.byId('guardian_national'), nation_store, Itemmake, data.id);	
					}else{
						dijit.byId('guardian_national').attr('value', data.id);
					}
				}
				getAllNation();	
				dijit.byId('frm_nation_kh').reset();
				dijit.byId("popup_nation").hide();
				HideloadingBlock();
			},
			error: function(err) {
			}
		});
	}
}



var url_add_job = '<?php echo $this->url(array("module"=>"foundation","controller"=>"register","action"=>"add-job")); ?>';
function addJob(){
	if(dijit.byId('frm_add_tran1').validate()){
		loadingBlock();
		type=dijit.byId('value_j').get('value');
		fa_job=dijit.byId('fa_job').get('value');
		mo_job=dijit.byId('mo_job').get('value');
		gu_job=dijit.byId('gu_job').get('value');
		dojo.xhrPost({
			url:url_add_job,
			form: dojo.byId("frm_add_tran1"),
			handleAs:"json",
			load: function(data) {
					var Itemmake = { 
							id: data,
							name: dijit.byId('occu_name').get('value')
					   };
				if(type==1){	
					if(data.addNew == 1){ 
						addDataToSelectbox(dijit.byId('fa_job'), job_store, Itemmake, data);
					}else{
						dijit.byId('fa_job').attr('value', data.id);
					}   
				}else if(type==2){
					if(data.addNew == 1){ 
						addDataToSelectbox(dijit.byId('mo_job'), job_store, Itemmake, data);
					}else{
						dijit.byId('mo_job').attr('value', data.id);
					}   
				}else if(type==3){
					if(data.addNew == 1){ 
						addDataToSelectbox(dijit.byId('gu_job'), job_store, Itemmake, data);
					}else{
						dijit.byId('gu_job').attr('value', data.id);
					}   
				}
				getAllJob();
				dijit.byId('frm_add_tran1').reset();
				dijit.byId("popup_dept2").hide();
				HideloadingBlock();
			},
			error: function(err) {
			}
		});
	}
}
</script>

<script type="text/javascript">
	var url_getgroup = '<?php echo $this->url(array("module"=>"foundation","controller"=>"group","action"=>"getgroup"));?>';										
	function getRefreshGroup(){
		loading();
		getAllAcademicByBranch();
		document.getElementsByClassName("overlay")[0].style.display="none";
}
	function loading(){
	    document.getElementsByClassName("overlay")[0].style.display="block";
	}
	  function readURL(input) {
	        if (input.files && input.files[0]) {
	            var reader = new FileReader();	            
	            reader.onload = function (e) {
	                $('#profile_wiew').attr('src', e.target.result);
	            }
	            reader.readAsDataURL(input.files[0]);
	        }
	    }
	    var maxSize = 0;
	    $("#photo").change(function(){
	        readURL(this);
	    });
		
var template = '';
var service = '';
var col = 0;
var no = 0;
var title = 0;
tmp = '';
temp='';
date_format = '"dd/MM/yyyy"';
	function addRow() {
		col++;no++;
		template='';
		if(title!=1){
			temp+='<th width="3%"><?php echo $tr->translate("DEL");?></th>';
			temp+='<th width="3%"><?php echo $tr->translate("N_O");?></th>';
			temp+='<th width="30%"><?php echo $tr->translate("DOCUMENT_TYPE");?></th>';
			temp+='<th width="12%"><?php echo $tr->translate("DATE_GIVE");?></th>';
			temp+='<th width="12%"><?php echo $tr->translate("RECEIVED");?></th>';
			temp+='<th width="12%"><?php echo $tr->translate("DATE_GIVE_BACK");?></th>';
			temp+='<th width="15%"><?php echo $tr->translate("NOTE");?></th>';
			temp+='<th width="10%"><?php echo $tr->translate("ATTACHMENT");?></th>';
			dojo.query("#head-title").append(temp);
			title=1;
		}
			template+='<td align="center"><img onclick="deleteRecord('+col+');" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
			template+='<td align="center">'+no+'</td>';
			template+='<td ><select class="fullside" name="document_type_'+col+'" id="document_type_'+col+'" value="0" onChange="popupDocType('+col+');checkDocument('+col+');" dojoType="dijit.form.FilteringSelect" >';	
				<?php if(!empty($this->doc_type)){foreach($this->doc_type as $doc_type){?>
					template+='<option value="'+'<?php echo $doc_type['id']?>'+'"><?php echo $doc_type['name'];?></option>';
				<?php }}?>
			template+='</select></td>';
			template+='<td ><input type="text" class="fullside" name="date_give_'+col+'" id="date_give_'+col+'" value="now" dojoType="dijit.form.DateTextBox" constraints='+'{datePattern:"dd/MM/yyyy"}'+' /></td>';
			template+='<td ><select class="fullside" name="is_receive_'+col+'" id="is_receive_'+col+'" dojoType="dijit.form.FilteringSelect" ><option value="0"><?php echo $tr->translate("NOT_RECEIVED");?></option><option value="1"><?php echo $tr->translate("RECEIVED");?></option></select></td>';
			template+='<td ><input type="text" class="fullside" name="date_end_'+col+'" id="date_end_'+col+'" value="now" dojoType="dijit.form.DateTextBox" constraints='+'{datePattern:"dd/MM/yyyy"}'+' /></td>';
			template+='<td ><input type="text" class="fullside" name="note_'+col+'" id="note_'+col+'" dojoType="dijit.form.TextBox" placeholder="<?php echo $tr->translate("NOTE");?>" /></td>';
			template+='<td >';
				template+='<div id="attachment'+col+'" class="form-group" style=" margin-bottom: 5px !important;width: 100px;">';
					template+='<div class="input-group input-file" name="attachment'+col+'">';
						template+='<input type="text" style="font-size:10px;width: 100px;" class="form-control" placeholder="<?php echo $tr->translate('CHOOSE_FILE');?>..." value="" />';
					template+='</div>';
				template+='</div> <div class="clearfix"></div>';
			template+='</td>';
		
		tmp='<tr id="row'+col+'" style="font-size:12px;">';
		tmp+="</tr>";
		dojo.query("#table_row").append(tmp);
		if($("#identity").val()!="") {
			var identity = $("#identity").val();
			$("#identity").val(identity+','+col);
		} else {$("#identity").val(col);}
		dojo.html.set(dojo.byId("row"+col),template , {
		     parseContent: true,
		});
		bs_input_file();
	}
	
function initialize() {  
		<?php if(!empty($this->row)){ 
			foreach($this->row as $row){ 
		?>
		col++;no++;
		template='';
		if(title!=1){
			temp+='<th width="3%"><?php echo $tr->translate("DEL");?></th>';
			temp+='<th width="3%"><?php echo $tr->translate("N_O");?></th>';
			temp+='<th width="30%"><?php echo $tr->translate("DOCUMENT_TYPE");?></th>';
			temp+='<th width="12%"><?php echo $tr->translate("DATE_GIVE");?></th>';
			temp+='<th width="12%"><?php echo $tr->translate("RECEIVED");?></th>';
			temp+='<th width="12%"><?php echo $tr->translate("DATE_GIVE_BACK");?></th>';
			temp+='<th width="15%"><?php echo $tr->translate("NOTE");?></th>';
			temp+='<th width="10%"><?php echo $tr->translate("ATTACHMENT");?></th>';
			dojo.query("#head-title").append(temp);
			title=1;
		}
			template+='<td align="center"><img onclick="deleteRecord('+col+');" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
			template+='<td align="center">'+no+'</td>';
			template+='<td ><select class="fullside" name="document_type_'+col+'" id="document_type_'+col+'" value="0" onChange="popupDocType('+col+');checkDocument('+col+');" dojoType="dijit.form.FilteringSelect" >';	
				<?php if(!empty($this->doc_type)){foreach($this->doc_type as $doc_type){?>
					template+='<option value="'+'<?php echo $doc_type['id']?>'+'"><?php echo $doc_type['name'];?></option>';
				<?php }}?>
			template+='</select></td>';
			template+='<td ><input type="text" class="fullside" name="date_give_'+col+'" id="date_give_'+col+'" value="now" dojoType="dijit.form.DateTextBox" constraints='+'{datePattern:"dd/MM/yyyy"}'+' /></td>';
			template+='<td ><select class="fullside" name="is_receive_'+col+'" id="is_receive_'+col+'" dojoType="dijit.form.FilteringSelect" ><option value="0"><?php echo $tr->translate("NOT_RECEIVED");?></option><option value="1"><?php echo $tr->translate("RECEIVED");?></option></select></td>';
			template+='<td ><input type="text" class="fullside" name="date_end_'+col+'" id="date_end_'+col+'" value="now" dojoType="dijit.form.DateTextBox" constraints='+'{datePattern:"dd/MM/yyyy"}'+' /></td>';
			template+='<td ><input type="text" class="fullside" name="note_'+col+'" id="note_'+col+'" dojoType="dijit.form.TextBox" placeholder="<?php echo $tr->translate("NOTE");?>" /></td>';
			template+='<td >';
				template+='<div id="attachment'+col+'" class="form-group" style=" margin-bottom: 5px !important;width: 100px;">';
				template+='<div class="input-group input-file" name="attachment'+col+'">';
					template+='<input type="text" style="font-size:10px;width: 100px;" class="form-control" placeholder="<?php echo $tr->translate('CHOOSE_FILE');?>..." value="<?php echo $row['attachment_file'];?>" />';
					<?php if (!empty($row['attachment_file'])){
						if (file_exists(PUBLIC_PATH."/images/document/student/".$row['attachment_file'])){
						?>
					template+='<span class="input-group-btn">';
						template+='<a title="<?php echo $tr->translate('VIEW_DOCUMENT');?>" href="<?php echo $this->baseUrl()."/images/document/student/".$row['attachment_file'];?>" target="_blank" class="btn btn-error btn-reset" ><i class="fa fa-eye" aria-hidden="true"></i></button></a>';
					template+='</span>';
					<?php }
					}?>
			template+='</div>';
			template+='</div> <div class="clearfix"></div>';
			template+='<input type="hidden" id="detailid'+col+'" name="detailid'+col+'"  value="<?php echo $row['id'];?>" />';
			template+='<input type="hidden" id="old_file'+col+'" name="old_file'+col+'"  value="<?php echo $row['attachment_file'];?>" />';
			template+='</td>';
		
		tmp='<tr id="row'+col+'" style="font-size:12px;">';
		tmp+="</tr>";
		dojo.query("#table_row").append(tmp);
		if($("#identity").val()!="") {
			var identity = $("#identity").val();
			$("#identity").val(identity+','+col);
		} else {$("#identity").val(col);}
		dojo.html.set(dojo.byId("row"+col),template , {
		     parseContent: true,
		});
		dijit.byId('document_type_'+col).attr('value',"<?php echo $row['document_type'];?>");
		dijit.byId('date_give_'+col).attr('value',"<?php echo $row['date_give'];?>");
		dijit.byId('date_end_'+col).attr('value',"<?php echo $row['date_end'];?>");
		dijit.byId('is_receive_'+col).attr('value',"<?php echo $row['is_receive'];?>");
		dijit.byId('note_'+col).attr('value',"<?php echo $row['note'];?>");
		bs_input_file();
		<?php }}?>
	}
	function deleteRecord(index) {
		var identity = $('#identity').val();
		var arrays = identity.split(',');
		for(var i=0;i<arrays.length;i++) {
		if(arrays[i] == index) arrays.splice(i,1);
		}
		var strings = arrays.join(',');
		$('#identity').val(strings);
		dojo.query("#row"+index).remove();
	}
	function deleteAllRow() {
		var identity = $('#identity').val();
		 var arrays = identity.split(',');
		for(var i=0;i<=arrays.length;i++){	
			deleteRecord(arrays[i]);
		}
 		no = 0;		
	}
	function checkDocument(index){
		var identity = $('#identity').val();
		var arrays = identity.split(',');
		current_subject = dijit.byId('document_type_'+index).get('value');
		for(var i=0;i<arrays.length;i++) {
			if(arrays[i] == index){
			}else{
				old_subject = dijit.byId('document_type_'+arrays[i]).get('value');
				if(current_subject == old_subject){
					alert("Can not add the same document !!! ");
					deleteRecord(index);
				}
			}
		}
	}
	function popupDocType(index){
		id = dijit.byId('document_type_'+index).get('value');
		dijit.byId("save_doc_type").attr("disabled",false);
		if(id==-1){
			$('#popup_index').val(index);
			dijit.byId("popup_doc_type").show();
		}
	}	
		
	function PrintDiv(keydiv) {
		loadingBlock();
	  	 var contents = document.getElementById(keydiv).innerHTML;
	 	  var frame1 = document.createElement('iframe');
	    frame1.name = "frame1";
	    frame1.style.position = "absolute";
	    frame1.style.top = "-1000000px";
	    document.body.appendChild(frame1);
	    var frameDoc = (frame1.contentWindow) ? frame1.contentWindow : (frame1.contentDocument.document) ? frame1.contentDocument.document : frame1.contentDocument; frameDoc.document.open();
	    frameDoc.document.write('<html><head><title>Employee ID</title>');
	    frameDoc.document.write('</head><body>');
	    frameDoc.document.write(contents);
	    frameDoc.document.write('</body></html>');
	    frameDoc.document.close();
	    setTimeout(function () {
	        window.frames["frame1"].focus();
	        window.frames["frame1"].print();
	        document.body.removeChild(frame1);
	        HideloadingBlock();
	    }, 2000);
	   return false;
	}		
	function readURLguardian(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#guardian_wiew').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    var maxSize = 0;
    $("#guardian_photo").change(function(){
        readURLguardian(this);
    });
	
	function readURLmother(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            
            reader.onload = function (e) {
                $('#mother_wiew').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    var maxSize = 0;
    $("#mother_photo").change(function(){
        readURLmother(this);
    });
	
	function readURLfather(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            
            reader.onload = function (e) {
                $('#father_wiew').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    var maxSize = 0;
    $("#father_photo").change(function(){
        readURLfather(this);
    });

    function bs_input_file() {
    	$(".input-file").before(
    		function() {
    		if ( ! $(this).prev().hasClass('input-ghost') ) {
    			var element = $("<input  type='file' accept='.xlsx,.xls,image/*,.doc, .docx,.txt,.pdf' class='input-ghost' style='visibility:hidden; height:0'>");
    			element.attr("name",$(this).attr("name"));
    			element.change(function(){
    				element.next(element).find('input').val((element.val()).split('\\').pop());
    			});
    			$(this).find("button.btn-choose").click(function(){
    				element.click();
    			});
    			
    			$(this).find('input').css("cursor","pointer");
    			$(this).find('input').mousedown(function() {
    				$(this).parents('.input-file').prev().click();
    				return false;
    			});
    			return element;
    		}
    	}
    	);
    }
	function getStudentNo(){
		
	}



	 var col_study = 0;
	    var no_study = 0;
	    var title_study = 0;
	    tmp_study = '';
	    temp_study='';
	    function addRowStudy() {
	    	degree = dijit.byId('degree').get('value');
	    	if(degree==''){
	    		dijit.byId('degree').focus();
	    		return false;
	    	}
	    	degreelabel = dijit.byId("degree").attr('displayedValue');
	    	gradelabel = dijit.byId("grade").attr('displayedValue');
	    	groupabel = dijit.byId("group").attr('displayedValue');
	    	grade = dijit.byId('grade').get('value');
	    	if(grade==''){
	    		grade = "";
	    		gradelabel="";
	    	}
	    	group = dijit.byId('group').get('value');
	    	if(group==''){
	    		group = "";
	    		groupabel="";
	    	}
	    	col_study++;no_study++;


	    	templateStudyEdit="";
	    	recordEdit = dijit.byId('recordEdit').get('value');
		    if(recordEdit!=""){
		    	rowIndex = dijit.byId('rowIndex').get('value');
		    	templateStudyEdit+='<td width="4%"align="center"><img style="width:15px; cursor: pointer;" onclick="editStudent('+col_study+');deleteRecord_study('+col_study+');" src="<?php echo $this->baseUrl();?>/images/edit.jpg">';
		    	templateStudyEdit+='<input dojoType="dijit.form.TextBox" type="hidden" id="detailid_study'+col_study+'" name="detailid_study'+col_study+'"  value="'+recordEdit+'" /></td>';
	    		deleteRecord_study(rowIndex);
			}else{
				templateStudyEdit+='<td></td>';
		    }
		    	
	    	template_study='';
	    	if(title_study!=1){
	    		temp_study+='<th><?php echo $tr->translate("DEL");?></th>';
	    		temp_study+='<th><?php echo $tr->translate("N_O");?></th>';
	    		temp_study+='<th ><?php echo $tr->translate("DEGREE");?></th>';
	    		temp_study+='<th ><?php echo $tr->translate("GRADE");?></th>';
	    		temp_study+='<th ><?php echo $tr->translate("GROUP");?></th>';
				temp_study+='<th ></th>';
	    		temp_study+='<th ><?php echo $tr->translate("EDIT");?></th>';
	    		dojo.query("#head-title_study").append(temp_study);
	    		title_study=1;
	    	}
	    		template_study+='<td width="4%"align="center"><img onclick="deleteRecord_study('+col_study+')" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
	    		template_study+='<td width="4%" align="center">'+no_study+'</td>';
	    		template_study+='<td>&nbsp;<input style="width:100%;" placeholder="<?php echo $tr->translate("DEGREE");?>" dojoType="dijit.form.TextBox" class="fullside" name="degree_'+col_study+'" id="degree_'+col_study+'" value="'+degree+'" type="hidden">'+degreelabel+'&nbsp;</td>';
	    		template_study+='<td>&nbsp;<input style="width:100%;" placeholder="<?php echo $tr->translate("GRADE");?>" dojoType="dijit.form.TextBox" class="fullside" name="grade_'+col_study+'" id="grade_'+col_study+'" value="'+grade+'" type="hidden">'+gradelabel+'&nbsp;</td>';
	    		template_study+='<td>&nbsp;<input style="width:100%;" placeholder="<?php echo $tr->translate("GROUP");?>" dojoType="dijit.form.TextBox" class="fullside" name="group_'+col_study+'" id="group_'+col_study+'" value="'+group+'" type="hidden">'+groupabel+'&nbsp;</td>';
				template_study+='<td>&nbsp;<input type="radio" name="is_main" id="is_main" value="'+col_study+'" />&nbsp;<?php echo $tr->translate("IS_MAIN_GRADE");?>&nbsp;</td>';
	    		template_study+=templateStudyEdit;
	    		
	    		
		 	    tmp_study='<tr id="row_study'+col_study+'">';
	    	tmp_study+="</tr>";
	    	dojo.query("#table_row_study").append(tmp_study);

	    	if($("#identity_study").val()!="") {
	    		var identity_study = $("#identity_study").val();
	    		$("#identity_study").val(identity_study+','+col_study);
	    	} else {$("#identity_study").val(col_study);}
	    	dojo.html.set(dojo.byId("row_study"+col_study),template_study , {
	    	     parseContent: true,
	    	});
	    	dijit.byId('degree').reset();
	    	dijit.byId('grade').reset();
	    	dijit.byId('group').reset();
	    	dijit.byId('recordEdit').reset();
	    	dijit.byId('rowIndex').reset();
	    }
	    function deleteRecord_study(index) {
	    	var identity = $('#identity_study').val();
	    	var arrays = identity.split(',');
	    	for(var i=0;i<arrays.length;i++) {
	    	if(arrays[i] == index) arrays.splice(i,1);
	    	}
	    	var strings = arrays.join(',');
	    	$('#identity_study').val(strings);
	    	dojo.query("#row_study"+index).remove();
	    }
	    function initializeStudy() {  
			<?php if(!empty($this->currentStudy)){ 
				foreach($this->currentStudy as $row){ 
			?>
			col_study++;no_study++;
	    	template_study='';
	    	if(title_study!=1){
	    		temp_study+='<th><?php echo $tr->translate("DEL");?></th>';
	    		temp_study+='<th><?php echo $tr->translate("N_O");?></th>';
	    		temp_study+='<th ><?php echo $tr->translate("DEGREE");?></th>';
	    		temp_study+='<th ><?php echo $tr->translate("GRADE");?></th>';
	    		temp_study+='<th ><?php echo $tr->translate("GROUP");?></th>';
				temp_study+='<th ></th>';
	    		temp_study+='<th ><?php echo $tr->translate("EDIT");?></th>';
	    		dojo.query("#head-title_study").append(temp_study);
	    		title_study=1;
	    	}

	    	template_study+='<td width="4%"align="center"><img onclick="deleteRecord_study('+col_study+')" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
    		template_study+='<td width="4%" align="center">'+no_study+'</td>';
    		template_study+='<td>&nbsp;<input style="width:100%;" placeholder="<?php echo $tr->translate("DEGREE");?>" dojoType="dijit.form.TextBox" class="fullside" name="degree_'+col_study+'" id="degree_'+col_study+'" value="<?php echo $row['degree'];?>" type="hidden"><?php echo $row['degreeTitle'];?>&nbsp;</td>';
    		template_study+='<td>&nbsp;<input style="width:100%;" placeholder="<?php echo $tr->translate("GRADE");?>" dojoType="dijit.form.TextBox" class="fullside" name="grade_'+col_study+'" id="grade_'+col_study+'" value="<?php echo $row['grade'];?>" type="hidden"><?php echo $row['gradeTitle'];?>&nbsp;</td>';
    		template_study+='<td>&nbsp;<input style="width:100%;" placeholder="<?php echo $tr->translate("GROUP");?>" dojoType="dijit.form.TextBox" class="fullside" name="group_'+col_study+'" id="group_'+col_study+'" value="<?php echo $row['group_id'];?>" type="hidden"><?php echo $row['groupCode'];?>&nbsp;';
    		template_study+='<input dojoType="dijit.form.TextBox" type="hidden" id="detailid_study'+col_study+'" name="detailid_study'+col_study+'"  value="<?php echo $row['gd_id'];?>" /></td>';
    		template_study+='<td>&nbsp;<input type="radio" name="is_main" id="is_main" <?php if($row['is_maingrade']==1){ echo 'checked="checked"'; }?> value="'+col_study+'" />&nbsp;<?php echo $tr->translate("IS_MAIN_GRADE");?>&nbsp;</td>';
			template_study+='<td width="4%"align="center"><img style="width:15px; cursor: pointer;" onclick="editStudent('+col_study+');" src="<?php echo $this->baseUrl();?>/images/edit.jpg"></td>';
  	        tmp_study='<tr id="row_study'+col_study+'">';
	    	tmp_study+="</tr>";
	    	dojo.query("#table_row_study").append(tmp_study);
				
	    	if($("#identity_study").val()!="") {
	    		var identity_study = $("#identity_study").val();
	    		$("#identity_study").val(identity_study+','+col_study);
	    	} else {$("#identity_study").val(col_study);}
	    	dojo.html.set(dojo.byId("row_study"+col_study),template_study , {
	    	     parseContent: true,
	    	});
			<?php }}?>
		}

	    function editStudent(index) {
	    	$("#row_study"+index).css("background-color", "#d0e2f7");
	    	degree = dijit.byId('degree_'+index).get("value");
	    	grade = dijit.byId('grade_'+index).get("value");
	    	group = dijit.byId('group_'+index).get("value");
	    	detailid = dijit.byId('detailid_study'+index).get("value");
	    	
	    	dijit.byId("degree").attr("value",degree);
	    	dijit.byId("grade").attr("value",grade);
	    	dijit.byId("group").attr("value",group);
	    	dijit.byId("recordEdit").attr("value",detailid);
	    	dijit.byId('rowIndex').attr("value",index);
	    }
</script>
<script>
<?php $successAudio = $this->baseUrl()."/images/frontFile/audio/no_sound.mp3";
if(!empty($this->rs['audioTitle'])){
	if (file_exists(PUBLIC_PATH."/images/frontFile/audio/".$this->rs['audioTitle'])){
		$successAudio = $this->baseUrl().'/images/frontFile/audio/'.$this->rs['audioTitle'];
	}
}
?>
var h = '<audio id="audioPlay" controls  src="<?php echo $successAudio;?>"></audio>'

$('#app').html(h);
$('audio').on('abort',function(){
  console.log('abort')
});

function readURLAudio(input) {
	if (input.files && input.files[0]) {
		var reader = new FileReader();
		
		reader.onload = function (e) {
			$('#audioPlay').attr('src', e.target.result);
		}
		reader.readAsDataURL(input.files[0]);
	}
}
var maxSize = 0;
$("#audiofile").change(function(){
	readURLAudio(this);
});


document.getElementById("audiofile").addEventListener("change", handleFiles, false);

</script>
