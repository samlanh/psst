<?php
	$tr = Application_Form_FrmLanguages::getCurrentlanguage();
	echo $this->headTitle($tr->translate('ADD_OCCUPATION')); 
?>
<form id='add_occupation' action="" method="post" dojoType="dijit.form.Form" enctype="application/x-www-form-urlencoded">

<script type="dojo/method" event="onSubmit">   
   if(this.validate()) {
    dijit.byId("save_close").attr("disabled",true);
	dijit.byId("save_new").attr("disabled",true);
    return true;
   }else {
    return false;
   }
</script>
<table  cellspacing="10" style="margin: 0 auto; width: 50%;">
	<tr>
		<td>
		<fieldset>
					<legend align="center"><strong><?php echo $tr->translate('ADD_OCCUPATION');?></strong></legend>
					<table style="margin: 0 auto; width: 100%;  padding:10px;" cellspacing="7" >
						<tr>
							<td><?php echo $tr->translate('TITLE');?></td>
							<td>
								<input dojoType="dijit.form.ValidationTextBox" required="1" class="fullside" id="occu_name" name="occu_name" type="text">
							</td>
						</tr>
						<tr>
							<td><?php echo $tr->translate('STATUS');?></td>
							<td>
								<select name="status" id="status" dojoType="dijit.form.FilteringSelect" required="true" class="fullside">
    								<option value="1" label="active">Active</option>
    								<option value="0" label="deactive">Deactive</option>
								</select>
							</td>
						</tr>
						<tr>
							<td colspan="4" align="center">
								<input iconClass="dijitIconClear" type="reset" value="សំអាត" label="<?php echo $tr->translate('CLEAR');?>" dojoType="dijit.form.Button"/>
								<input type="button" onClick="submitDataClose()" value="save_close" name="save_close" id="save_close" label="<?php echo $tr->translate('SAVE_CLOSE');?>" dojoType="dijit.form.Button" 
									iconClass="dijitEditorIcon dijitEditorIconSave" />
								<input type="submit" value="save_new" name="save_new" id="save_new" label="<?php echo $tr->translate('SAVE_NEW');?>" dojoType="dijit.form.Button" 
									iconClass="dijitEditorIcon dijitEditorIconSave" />
							</td>
						</tr>
						
					</table>
		</fieldset>
		</td>
	</tr>
</table>
</form>
<script>

function submitDataClose(){
	if(dijit.byId('add_occupation').validate()) {
		dijit.byId('save_close').set('disabled',true);
		dijit.byId('save_new').set('disabled',true);
		var url_submit = '<?php echo $this->url(array('module'=>'global','controller'=>'occupation','action'=>'add')); ?>';
		dojo.xhrPost({
		    url: url_submit,	
			form: dojo.byId("add_occupation"),		    
			load: function(data) {
				alert('<?php echo $tr->translate('INSERT_SUCCESS');?> !');
				window.location.href ="<?php echo $this->baseUrl();?>/global/occupation";
			},
			error: function(e) {
			}
		});
	}
}
 
</script>