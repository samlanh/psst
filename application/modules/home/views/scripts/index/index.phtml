 <?php
	$tr=Application_Form_FrmLanguages::getCurrentlanguage();
	$this->headTitle($tr->translate("Dashboard Student Registration Management System"));
	echo $this->headTitle();
?>
<link rel="stylesheet" href="<?php echo $this->baseUrl()."/"?>dashboard/plugins/morris/morris.css">
 <!-- Bootstrap core CSS -->
 <link href="<?php echo $this->baseUrl()."/"?>dashboard/css/bootstrap.min.css" rel="stylesheet">
<!-- Icons CSS -->
<link href="<?php echo $this->baseUrl()."/"?>dashboard/css/icons.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="<?php echo $this->baseUrl()."/"?>dashboard/css/style.css" rel="stylesheet">
<div id="page-wrapper">
	<!-- Page content start -->
	<div class="page-contentbar">
		<!-- START PAGE CONTENT -->
		<div id="page-right-content">
			<div class="container">
				 <div class="row">
					<div class="col-lg-6">
						<div class="card-box">
							<div class="col-lg-12">
								<div class="accounting-management text-center">
									<div class="col-lg-6 capital-box" style="background:#17418e;; color: #fff">
										<a href="<?php echo $this->url(array('module'=>'home','controller'=>'searchstudentinfo','action'=>'index'), null, true);?>">
											<span data-bind="text: txnRecorded"><h3><?php echo $tr->translate("FINDING_ALL_STUDENT_INFORMATION")?></h3></span>
											<p class="month" style="text-align: center; margin: 0 auto;" data-bind="text: lang.lang.transactions_recorded">&nbsp;<?php //echo $tr->translate("STUDENT_BACKGROUND")?></p>
										</a>
									</div>
									<div class="col-lg-6 capital-box" style="background: #203864; color: #fff">
										<span data-bind="text: txnRecorded"><?php if ($this->netIncome<0){ echo "$ ".number_format(abs($this->netIncome),2);}else{ echo "$ ".number_format($this->netIncome,2);}?></span>
										<p class="month" style="text-align: center; margin: 0 auto;" data-bind="text: lang.lang.transactions_recorded"><?php echo $tr->translate("Net Income")?></p>
									</div>
									<div class="col-lg-12" style="padding: 0;">
										<div class="col-lg-6 capital-box" style="background: #0077c5;">
											<span data-bind="text: currentRatio"><?php echo "$ ".number_format($this->totalIncome,2);?></span> 
											<p class="month" data-bind="text: lang.lang.current_ratio"><?php echo $tr->translate("Total Income")?></p>
										</div>
										<div class="col-lg-6 capital-box" style="background: #21abf6; color: #fff;">
											<span data-bind="text: quickRatio"><?php echo "$ ".number_format($this->totalExpense,2);?></span> 
											<p class="month" style="color: #fff;" data-bind="text: lang.lang.quick_ratio"><?php echo $tr->translate("Total Expense")?></p>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="card-box">
							<div class="col-lg-6">
								<h4 class="m-t-0"><?php echo $tr->translate("Yearly Student")?></h4>
								<div class="text-center">
									<ul class="list-inline chart-detail-list">
										<li>
											<h5 class="font-normal"><i class="fa fa-circle m-r-10 text-primary"></i><?php echo $tr->translate("Number Of Student")?></h5>
										</li>
									</ul>
								</div>
								<div id="dashboard-bar-stacked" style="height: 200px;"></div>
							</div>
							<div class="col-lg-6">
								<h4 class="m-t-0"><?php echo $tr->translate("Monthly Net Income")?></h4>
								<div class="text-center">
									<ul class="list-inline chart-detail-list">
										<li>
											<h5 class="font-normal"><i class="fa fa-circle m-r-10 text-muted"></i><?php echo $tr->translate("Net Income")?></h5>
										</li>
									</ul>
								</div>
								<div id="dashboard-bar-income" style="height: 200px;"></div>
							</div>
						</div> 
					</div> <!-- end col -->	  
					 <div class="col-lg-6">
					 	
						<div class="card-box">
							<div class="col-lg-12">
								<div class="col-lg-6">
									<p><span data-bind="text: lang.lang.performance"><?php echo $tr->translate("Monthly Student Information")?></span></p>
									<table class="performance">
										<tbody>
											<tr>
												<td><a target="_blank" href="<?php echo $this->baseUrl()."/allreport/allstudent/rpt-all-student";?>"><span data-bind="text: lang.lang.income"><?php echo $tr->translate("STUDENT_TOTAL")?></span></a></td>
												<td></td>
												<td align="right"><span data-bind="text: obj.income"><?php echo $this->rsamountstudent; echo $tr->translate("STUDENT_UNIT");?></span></td>
											</tr>
											<tr>
												<td><span data-bind="text: lang.lang.expense"><?php echo $tr->translate("NEW_STUDENT")?></span></td>
												<td></td>
												<td align="right"><span data-bind="text: obj.expense"><?php echo $this->rsnewstudent; echo $tr->translate("STUDENT_UNIT");?></span></td>
											</tr>
											<tr>
												<td><b><span data-bind="text: lang.lang.net_income"><?php echo $tr->translate("STUDENT_DROP")?></span></b></td>
												<td></td>
												<td align="right"><b data-bind="text: obj.net_income"><?php echo $this->rsdropstudent; echo $tr->translate("STUDENT_UNIT");?></b></td>
											</tr>
										</tbody>
									</table>
								</div>
								<div class="col-lg-6">
									<p><span data-bind="text: lang.lang.performance"><?php echo $tr->translate("Monthly Student Test Info")?></span></p>
									<table class="performance">
										<tbody>
											<tr>
												<td><a href="<?php echo $this->baseUrl()."/registrar/rptstudenttest/index";?>"><span data-bind="text: lang.lang.income"><?php echo $tr->translate("Student Test")?></span></a></td>
												<td></td>
												<td align="right"><span data-bind="text: obj.income"><?php echo $this->rsteststudent; echo $tr->translate("STUDENT_UNIT");?></span></td>
											</tr>
											<tr>
												<td><a href="<?php echo $this->baseUrl()."/registrar/rptstudenttest/index";?>"><span data-bind="text: lang.lang.income"><?php echo $tr->translate("Completed Result")?></span></a></td>
												<td></td>
												<td align="right"><span data-bind="text: obj.income"><?php echo $this->rsupdateresult; echo $tr->translate("STUDENT_UNIT");?></span></td>
											</tr>
											<tr>
												<td><a href="<?php echo $this->baseUrl()."/registrar/rptstudenttest/index";?>"><span data-bind="text: lang.lang.expense"><?php echo $tr->translate("Completed Register")?></span></a></td>
												<td></td>
												<td align="right"><span data-bind="text: obj.expense"><?php echo $this->rsteststuregistered; echo $tr->translate("STUDENT_UNIT");?></span></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
							<div class="col-lg-12">
								<div class="col-lg-12">
									<p><span data-bind="text: lang.lang.performance"><?php echo $tr->translate("Study Information")?></span></p>
									<div class="widget-body alert-info welcome-nopadding">
											<table width="100%" class="saleInfo">
												<thead>
													<tr align="center">
														<td>										
															&nbsp;
														</td>
														<td>
															<span data-bind="text: obj.ar_customer"><?php echo $tr->translate("Number Of Student")?></span>
														</td>
														<td>
															<span data-bind="text: obj.ar_overdue"><?php echo $tr->translate("Income")?></span>
														</td>
													</tr>
												</thead>
												<tbody>
													<tr align="left">
														<td class="border-rig">										
															<span data-bind="text: obj.ar_open"><?php echo $tr->translate("Kindergarten")?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_customer">0<?php //echo $this->CountAllSale['total'];?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_overdue"><?php echo "$ ".number_format($this->CountAllSale['totalAmount'],2);?></span>
														</td>
													</tr>
													<tr align="left">
														<td class="border-rig">										
															<span data-bind="text: obj.ar_open"><?php echo $tr->translate("GEP")?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_customer">0<?php //echo $this->CountCompletedSale['total'];?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_overdue"><?php echo "$ ".number_format($this->CountCompletedSale['totalAmount'],2);?></span>
														</td>
													</tr>
													<tr align="left">
														<td class="border-rig">										
															<span data-bind="text: obj.ar_open"><?php echo $tr->translate("Primary School")?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_customer">0<?php //echo $this->CountCanceledSale;?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_overdue"><?php echo "$ ".number_format($this->CancelPropertyAmount,2);?></span>
														</td>
													</tr>
													<tr align="left">
														<td class="border-rig">										
															<span data-bind="text: obj.ar_open"><?php echo $tr->translate("Secondary School")?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_customer">0<?php //echo $this->CountCanceledSale;?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_overdue"><?php echo "$ ".number_format($this->CancelPropertyAmount,2);?></span>
														</td>
													</tr>
													<tr align="left">
														<td class="border-rig">										
															<span data-bind="text: obj.ar_open"><?php echo $tr->translate("High School")?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_customer">0<?php //echo $this->CountCanceledSale;?></span>
														</td>
														<td align="center">
															<span data-bind="text: obj.ar_overdue"><?php echo "$ ".number_format($this->CancelPropertyAmount,2);?></span>
														</td>
													</tr>
												</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						
						<div class="card-box">
							<div class="col-lg-12">
								<div class="accounting-management text-center">
									<div class="col-lg-12" style="padding: 0;">
										<a title="<?php echo $tr->translate("CUSTOMER_PAYMENTLIST")?>" target="_blank" href="<?php echo $this->baseUrl()."/allreport/accounting/rptstudentnearlyendservice";?>">
											<div class="col-lg-6 capital-box" style="background: #0f575b;">
												<span data-bind="text: currentRatio"><?php echo count($this->customerNearlyPayment);?></span> 
												<p class="month" data-bind="text: lang.lang.current_ratio"><?php echo $tr->translate("Student Nearly Payment")?></p>
											</div>
										</a>
										<a  title="<?php echo $tr->translate("CUSTOMER_PAYMENTLIST")?>" target="_blank" href="<?php echo $this->baseUrl()."/allreport/accounting/rptstudentpaymentlate";?>">
											<div class="col-lg-6 capital-box" style="background: #203864; color: #fff;">
												<span data-bind="text: quickRatio"><?php echo count($this->customerNearlyAgreement);?></span> 
												<p class="month" style="color: #fff;" data-bind="text: lang.lang.quick_ratio"><?php echo $tr->translate("Student Late Payment")?></p>
											</div>
										</a>
									</div>
								</div>
							</div>
						</div>  
					</div> <!-- end col -->	  
				</div> <!-- end row -->
				
                 <div class="row-fluid">
					<div style="margin-top: 10px; margin-left: 0;" align="center">
						<p>© 2018<span data-bind="text: lang.lang.all_rights_reserved"><a href="http://www.cam-app.com" target="_blank" > Cam App Teachnology</a>. All rights reserved.</span></p>
					</div>	
				</div>       
			</div>
		</div>
		<!-- END PAGE CONTENT -->
	</div>

</div>
   <!-- js placed at the end of the document so the pages load faster -->
        <script src="<?php echo $this->baseUrl()."/"?>dashboard/js/jquery-2.1.4.min.js"></script>
        <script src="<?php echo $this->baseUrl()."/"?>dashboard/js/bootstrap.min.js"></script>


<!--Morris Chart-->
<script src="<?php echo $this->baseUrl()."/"?>dashboard/plugins/morris/morris.min.js"></script>
<script src="<?php echo $this->baseUrl()."/"?>dashboard/plugins/raphael/raphael-min.js"></script>

 <!-- Dashboard init 
<script src="<?php echo $this->baseUrl()."/"?>dashboard/pages/jquery.dashboard.js"></script>-->
<?php 
   $start_year = date("Y-m-d",strtotime(" -6 month"));
?>
<script>
var $stckedData  = [];
//creating Stacked chart
var $stckedData  = [
        { y: '2012', a: 0},
        { y: '2013', a: 0},
        { y: '2014', a: 0},
        { y: '2015', a: 0},
        { y: '2016', a: 0},
        { y: '2017', a: 0},
        { y: '2018', a: 2},
    ];
var $stckedDataIncmoe  = [];
var $stckedDataIncmoe  = [
       { y: '2017-09', a: 0},
         { y: '2017-10', a: 0},
         { y: '2017-11', a: 0},
         { y: '2017-12', a: 0},
         { y: '2018-01', a: -200},
         { y: '2018-02', a: -500},
         { y: '2018-03', a: 2565},
    ];
/**
* Theme: SimpleAdmin Admin Template
* Author: Coderthemes
* Morris Chart
*/
!function($) {
    "use strict";
    var Dashboard = function() {};
    //creates Stacked chart
    Dashboard.prototype.createStackedChart  = function(element, data, xkey, ykeys, labels, lineColors) {
        Morris.Bar({
            element: element,
            data: data,
            xkey: xkey,
            ykeys: ykeys,
            stacked: true,
            labels: labels,
            hideHover: 'auto',
            resize: true, //defaulted to true
            gridLineColor: '#ccc',
            barColors: lineColors
        });
    },
    Dashboard.prototype.init = function() {
        this.createStackedChart('dashboard-bar-stacked', $stckedData, 'y', ['a'], ['Number Of Student'], ['#458bc4']);
    },
    //init
    $.Dashboard = new Dashboard, $.Dashboard.Constructor = Dashboard


    var DashboardII = function() {};
    //creates Stacked chart
    DashboardII.prototype.createStackedChart  = function(element, data, xkey, ykeys, labels, lineColors) {
        Morris.Bar({
            element: element,
            data: data,
            xkey: xkey,
            ykeys: ykeys,
            stacked: true,
            labels: labels,
            hideHover: 'auto',
            resize: true, //defaulted to true
            gridLineColor: '#ccc',
            barColors: lineColors
        });
    },
    DashboardII.prototype.init = function() {
        this.createStackedChart('dashboard-bar-income', $stckedDataIncmoe, 'y', ['a'], ['ចំណូលដុល'], ['#144673']);
    },
    //init
    $.DashboardII = new DashboardII, $.DashboardII.Constructor = DashboardII
    
}(window.jQuery),

//initializing
function($) {
    "use strict";
    $.Dashboard.init();
    $.DashboardII.init();
}(window.jQuery);

</script>
 <!-- App Js -->
<script src="<?php echo $this->baseUrl()."/"?>dashboard/js/jquery.app.js"></script>
