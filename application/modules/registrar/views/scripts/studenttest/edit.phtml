<?php
$tr = Application_Form_FrmLanguages::getCurrentlanguage();
echo $this->headTitle($tr->translate('EDIT_STUDENT_TEST'));
 
?>
<script src="<?php echo $this->baseUrl();?>/js/help.js"  type="text/javascript"></script>
<script src="<?php echo $this->baseUrl();?>/ckeditor/ckeditor.js"></script>
 <script>
		require(["dijit/form/DateTextBox","dijit/form/Textarea"]);
 </script>
 
 
 <script type="text/javascript">
	dojo.require("dojo.data.ItemFileWriteStore");  
	var grade_store  = getDataStorefromJSON('id','name', <?php print_r(Zend_Json::encode($this->dept));?> );
	
	dojo.ready(function(){
		new dijit.form.FilteringSelect({
			store: grade_store,
			autoComplete: true,                        
			required: false,
			id: "grade",
			name: "grade",   
			class: "fullside", 
			placeHolder:"Select grade",          
			onChange: function() {  
				// dept_id = dijit.byId('grade_result').get('value');
				// if(dept_id==-1){
					// dijit.byId("popup_add_dept").show();
				// }
			}
		}, "grade");

		new dijit.form.FilteringSelect({
			store: grade_store,
			autoComplete: true,                        
			required: false,
			id: "grade_result",
			name: "grade_result",
			value:"<?php echo $this->rs['grade_result']?>",                
			class: "fullside", 
			placeHolder:"Select Level Result",          
			onChange: function() {  
				
			}
		}, "grade_result");
		
		getAllGrade();

		dijit.byId('time').attr('value','<?php echo $this->rs['time_result']?>');
		
		
	});
	
</script>
 
 
<form id='frm_teststudent' action="<?php echo $this->url(array('module'=>'registrar','controller'=>'studenttest','action'=>'edit')); ?>" 
				dojoType="dijit.form.Form" method="post" enctype="multipart/form-data">
	<script type="dojo/method" event="onSubmit" enctype="multipart/form-data">			
			if(this.validate()) {
				if(dijit.byId("degree").get("value")==''){
           			alert("Please Select Degree Name");
					dijit.byId("degree").focus();
					return false;
				}
				 
				return true;
			}else {
				return false;
			}
	</script>
	
	<table cellspacing="10" class='fullside' >
		<tr>
			<td>
				<fieldset>
					<legend><strong><?php echo $tr->translate('STUDENT_DETAIL')?></strong></legend>
						<table cellspacing="0"  width="100%" style="white-space: nowrap;">
							<tr>
								<td valign="top" width="66%" colspan="2">
								<fieldset>
									<legend align="center"><strong><?php echo $tr->translate('STUDENT_PROFILE')?></strong></legend>
										<table cellspacing="0"  width="100%" style="white-space: nowrap;">
											<tr>
												<td valign="top" width="33%">
													<table cellspacing="5" width="100%" >
														<tr>
															<td><strong><?php echo $tr->translate("NAME_KH")?></strong></td>
															<td><input type="text" name="kh_name" id="kh_name" value="<?php echo $this->rs['kh_name']?>" required="true" class="fullside" dojoType="dijit.form.ValidationTextBox"   /></td>
														</tr>
														<tr>
															<td style="white-space: nowrap;"><?php echo $tr->translate("NAME_EN")?></td>
															<td><input type="text" name="en_name" id="en_name" value="<?php echo $this->rs['en_name']?>" required="true"  class="fullside" dojoType="dijit.form.ValidationTextBox" /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("SEX")?></td>
															<td>
																<select name="sex" id="sex" class="fullside" dojoType="dijit.form.FilteringSelect"  >
																	<option value="1" <?php if($this->rs['sex']==1){echo "selected='selected'";}?>><?php echo $tr->translate('MALE')?></option>
																	<option value="2" <?php if($this->rs['sex']==2){echo "selected='selected'";}?>><?php echo $tr->translate('FEMALE')?></option>
																</select>
															</td>						
														</tr>
														<tr>
															<td><?php echo $tr->translate("NATIONALITY")?></td>
															<td><input type="text" name="nationality" id="nationality" value="<?php echo $this->rs['nationality']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("DOB")?></td>
															<td><input type="text" name="dob" value="<?php echo $this->rs['dob']?>" id="dob" class="fullside"  value="now" constraints="{datePattern:'dd/MM/yyyy'}" dojoType="dijit.form.DateTextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("POB")?></td>
															<td><input type="text" name="pob" id="pob" value="<?php echo $this->rs['pob']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("PHONE")?></td>
															<td><input type="text" name="phone" id="phone" value="<?php echo $this->rs['phone']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("EMAIL")?></td>
															<td><input type="text" name="email" id="email" value="<?php echo $this->rs['email']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														
													</table>
												</td>
												<td valign="top" width="33%">
													<table cellspacing="5"  width="100%">
														
														<tr>
															<td><?php echo $tr->translate("STUDENT_STATUS")?></td>
															<td>
																<select name="student_status" id="student_status" class="fullside" dojoType="dijit.form.FilteringSelect"  >
																	<option value="1" <?php if($this->rs['student_status']==1){echo "selected='selected'";}?>><?php echo $tr->translate('SINGLE')?></option>
																	<option value="2" <?php if($this->rs['student_status']==2){echo "selected='selected'";}?>><?php echo $tr->translate('MARRIED')?></option>
																	<option value="3" <?php if($this->rs['student_status']==3){echo "selected='selected'";}?>><?php echo $tr->translate('MONK')?></option>
																</select>
															</td>						
														</tr>
														<tr>
															<td><?php echo $tr->translate("IF_EMPLOYED_WHERE")?></td>
															<td><input type="text" name="if_employed_where" id="if_employed_where" value="<?php echo $this->rs['if_employed_where']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("POSITION")?></td>
															<td><input type="text" name="position" id="position" value="<?php echo $this->rs['position']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("PARENT_NAME")?></td>
															<td><input type="text" name="parent_name" id="parent_name" value="<?php echo $this->rs['parent_name']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															<td><?php echo $tr->translate("PARENT_TEL")?></td>
															<td><input type="text" name="parent_tel" id="parent_tel" value="<?php echo $this->rs['parent_tel']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														
														<tr>
															<td><?php echo $tr->translate("OLD_SCHOOL")?></td>
															<td><input type="text" name="old_school" id="old_school" value="<?php echo $this->rs['old_school']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
														</tr>
														<tr>
															 <td><?php echo $tr->translate("OLD_GRADE")?></td>
															 <td><input type="text" name="old_grade" id="old_grade" value="<?php echo $this->rs['old_grade']?>" class="fullside" dojoType="dijit.form.TextBox" /></td>
														</tr>
														
														<tr>
														    <td><?php echo $tr->translate("ADDRESS")?></td>
															<td colspan="1"><textarea style="min-height:60px;font-family:'Khmer OS Battambang';font-size: 15px;" value="<?php echo $this->rs['address']?>" class="fullside" name="address" id="address" dojoType="dijit.form.Textarea" ></textarea></td>
														</tr>
														
													</table>
												</td>
											</tr>
										</table>
								</fieldset>
								</td>
								<td valign="top"  width="33%">
								<fieldset>
								<legend align="center"><strong><?php echo $tr->translate('STUDENT_TEST_INFORMATION')?></strong></legend>
									<table cellspacing="5"  width="100%">
										<tr>
										    <td><?php echo $tr->translate("STUDENT_ID")?></td>
											<td><input  style="color:red;" type="text" name="stu_code" value="<?php echo $this->rs['stu_code']?>" id="stu_code" readonly class="fullside" dojoType="dijit.form.TextBox"   /></td>
										</tr>
										<tr>
										    <td><?php echo $tr->translate("SERIAL")?></td>
											<td><input type="text" name="serial" id="serial" value="<?php echo $this->rs['serial']?>" class="fullside" dojoType="dijit.form.TextBox"   /></td>
										</tr>
										<tr>
											<td><strong><?php echo $tr->translate("DEGREE")?></strong></td>
											<td>
												<select name="degree_result" id="degree_result" class="fullside" dojoType="dijit.form.FilteringSelect" onchange="getAllGradeResult();" >
													<option value="">select degree</option>
													<?php if(!empty($this->degree)){foreach($this->degree as $rs){?>
														<option value="<?php echo $rs['id'];?>"><?php echo $rs['name'];?></option>
													<?php }}?>
												</select>
											</td>
										</tr>
										<tr>
											<td><strong><?php echo $tr->translate("LEVEL_RESULT")?></strong></td>
											<td><input input id="grade_result" /></td>
										</tr>
										<tr>
										    <td><?php echo $tr->translate("TERM_TEST")?></td>
											<td><input type="text" name="term_test" id="term_test" class="fullside" dojoType="dijit.form.TextBox"  value="<?php echo $this->rs['term_test']?>" /></td>
										</tr>
										<tr>
											 <td><?php echo $tr->translate("TEST_DATE")?></td>
											 <td><input type="text" name="test_date" required="true" value="<?php echo $this->rs['test_date']?>"  id="test_date" class="fullside" constraints="{datePattern:'dd/MM/yyyy'}" value="now" dojoType="dijit.form.DateTextBox"   /></td>
										</tr>
										<!-- <tr>
											 <td><?php //echo $tr->translate("DATE_RESULT")?></td>
											 <td><input type="text" name="date_result" required="true"  id="date_result" class="fullside" constraints="{datePattern:'dd/MM/yyyy'}" value="<?php echo $this->rs['date_result']?>" dojoType="dijit.form.DateTextBox"   /></td>
										</tr> -->
										<tr>
											<td valign="top"><?php echo $tr->translate("NOTE")?></td>
											<td><input type="text" name="note"  id="note" class="fullside" value="<?php echo $this->rs['note']?>" dojoType="dijit.form.TextBox"   /></td>
										</tr>
										<tr>
											 <td><?php echo $tr->translate("PHOTO")?></td>
											 <td>
											 	<img  src="<?php echo $this->baseUrl().'/images/'.$this->rs['photo'];?>" style="width: 80px;height: 100px;">
											 	<input type="file" name="photo"  id="photo" class="fullside"  />
											 	<input type="hidden" name="old_photo" name="old_photo" value="<?php echo $this->rs['photo'];?>" dojoType="dijit.form.TextBox" />
 											 </td>
										</tr>
									</table>
								</fieldset>
								</td>
							</tr>
							
							<tr>
								<td colspan="3" style="border-bottom:1px solid #ccc;font-size: 16px;"><strong><?php echo $tr->translate("EMERGENCY_CONTACT")?></strong></td>
							</tr>
							<tr>
								<td colspan="3" style="font-size: 15px;">List any person whom you would like to be contacted in case of emergency.</td>
							</tr>
							
							<tr>
								<td colspan="3" width="100%">
									<table width="100%" border="0">
										<tr>
											<td width="10%"></td>
											<td width="40%"></td>
											<td width="10%"></td>
											<td width="40%"></td>
										</tr>
									
										<tr>
											<td><?php echo $tr->translate("NAME")?></td>
											<td colspan="3" >
												<input type="text" name="emergency_name" id="emergency_name" value="<?php echo $this->rs['emergency_name']?>" class="fullside" dojoType="dijit.form.TextBox"   />
											</td>
										</tr>
										
										<tr>
											<td ><?php echo $tr->translate("RELATIONSHIP_TO_STUDENT")?></td>
											<td >
												<input type="text" name="relationship_to_student" value="<?php echo $this->rs['relationship_to_student']?>" id="relationship_to_student" class="fullside" dojoType="dijit.form.TextBox"   />
											</td>
											
											<td align="center"><?php echo $tr->translate("PHONE")?></td>
											<td >
												<input type="text" name="emergency_tel" id="emergency_tel" value="<?php echo $this->rs['emergency_tel']?>" class="fullside" dojoType="dijit.form.TextBox"   />
											</td>
										</tr>
										
										<tr>
											<td width="20%"><?php echo $tr->translate("ADDRESS")?></td>
											<td colspan="3" width="80%">
												<input type="text" name="emergency_address" id="emergency_address" value="<?php echo $this->rs['emergency_address']?>" class="fullside" dojoType="dijit.form.TextBox"   />
											</td>
										</tr>
										
									</table>
								</td>
							</tr>
								
							<tr>
								<td colspan="3" style="border-bottom:1px solid #ccc;font-size: 16px;"><strong><?php echo $tr->translate("EDUCATIONAL_BACKGROUND")?>(SchoolName , Grade/Level/Year , Major , Year)</strong></td>
							</tr>	
							 
							<tr>
								<!-- <td colspan="3" width="100%">
									<textarea class="ckeditor"  rows="1"   id="edu_background" name="edu_background"></textarea>
								</td> -->
								<td colspan="3">
								    <table class="collape tablesorter" id="table_row" style="white-space: nowrap;border:1px solid #ddd;">
								    	<tr id="head-title" class="head-td" align="right"></tr>
									</table>
									<input type="button" label="<?php echo $tr->translate('ADD_ROW');?>" dojoType="dijit.form.Button" 
										iconClass="dijitIconEditProperty" onclick="addRow();" />
									<input type="hidden" name="identity" id="identity" dojoType="dijit.form.TextBox" value="" >
								</td>
							</tr>
							
							<tr>
								<td colspan="3" style="border-bottom:1px solid #ccc;font-size: 16px;"><strong><?php echo $tr->translate("COUSE_WANT_STUDY");?></strong></td>
							</tr>
							
							<tr>
								<td colspan="3" width="100%">
									<table width="100%" >
										<tr>
											<td><strong><?php echo $tr->translate("DEGREE")?></strong></td>
											<td>
												<select name="degree" id="degree" class="fullside" dojoType="dijit.form.FilteringSelect" onchange="getAllGrade();" >
													<option value="">select degree</option>
													<?php if(!empty($this->degree)){foreach($this->degree as $rs){?>
														<option value="<?php echo $rs['id'];?>" <?php if($rs['id']==$this->rs['degree_result']){echo "selected='selected'";}?>><?php echo $rs['name'];?></option>
													<?php }}?>
												</select>
											</td>
											
											<td ><strong><?php echo $tr->translate("GRADE")?></strong></td>
											<td >
												<input input id="grade" />
											</td>
											
											<td align="center"><?php echo $tr->translate("SESSION")?></td>
											<td>
												<select name="session" id="session" class="fullside" dojoType="dijit.form.FilteringSelect"  >
													<option value="">select session</option>
													<?php if(!empty($this->session)){foreach($this->session as $session){?>
															<option value="<?php echo $session['id'];?>" <?php if($session['id']==$this->rs['session_result']){echo"selected";}?>><?php echo $session['name'];?></option>
													<?php }}?>
												</select>
											</td>
											
											<td><?php echo $tr->translate("TIME")?></td>
											<td>
												<select required="false" name="time" id="time" class="fullside" dojoType="dijit.form.FilteringSelect" >
													<option value="">select time</option>
													<option value="7:30-11:00 am">7:30-11:00 am</option>
													<option value="7:30-11:30 am">7:30-11:30 am</option>
													<option value="8:00-9:30 am">8:00-9:30 am</option>
													<option value="8:00-11:00 am">8:00-11:00 am</option>
													<option value="9:30-11:00 am">9:30-11:00 am</option>
													<option value="1:00-4:00 pm">1:00-4:00 pm</option>
													<option value="1:30-6:30 pm">1:30-6:30 pm</option>
													<option value="2:00-3:30 pm">2:00-3:30 pm</option>
													<option value="2:00-5:00 pm">2:00-5:00 pm</option>
													<option value="3:30-5:00 pm">3:30-5:00 pm</option>
													<option value="5:30-7:00 pm">5:30-7:00 pm</option>
													<option value="5:30-8:30 pm">5:30-8:30 pm</option>
													<option value="7:30-8:30 pm">7:30-8:30 pm</option>												
												</select>	
											</td>
										</tr>
										
									</table>
								</td>
							</tr>
						</table>
				</fieldset>
			</td>
		</tr>
		
		<tr>
			<td align="center">
				<input label="<?php echo $tr->translate("GO_EDIT")?>" name='saveclose' id='saveclose' value='saveclose' dojoType="dijit.form.Button" type="submit"  iconClass="dijitEditorIcon dijitEditorIconSave"/>
			</td>
		</tr>	
	</table>
</form>
<style>
.headerreceipt{height: 0px !important;}
</style>

<script>
function submitData(){
	if(dijit.byId('frm_teststudent').validate()) {
		dijit.byId('savenew').set('disabled',true);
		dijit.byId('frm_teststudent').submit();
	}
}
function submitData(){
	if(dijit.byId('frm_teststudent').validate()) {
		dijit.byId('savenew').set('disabled',true);
		dijit.byId('frm_teststudent').submit();
	}
}
var url_get_grade = '<?php echo $this->url(array('module'=>'registrar','controller'=>'register','action'=>'get-grade')); ?>';
function getAllGradeResult(){
		dijit.byId('grade_result').set('value','');   
		dept_id = dijit.byId('degree_result').get('value');
		if(dept_id==''){
			return false;
		}
		dojo.xhrPost({
			url:url_get_grade,
			content:{
				'dept_id':dept_id
				},
			handleAs:"json",
			load: function(data) {
				grade_store  = getDataStorefromJSON('id','name', data);
				dijit.byId('grade_result').set('store',grade_store);  
			},
			error: function(err) {
				alert(err);
			}
		});
}
var url_get_grade = '<?php echo $this->url(array('module'=>'registrar','controller'=>'register','action'=>'get-grade')); ?>';
function getAllGrade(){
	dijit.byId('grade').set('value',''); 
	dijit.byId('grade_result').set('value','');   
	dept_id = dijit.byId('degree').get('value');
	if(dept_id==''){
		return false;
	}
	
	old_grade = '<?php echo $this->rs['grade_result']?>';
	
	dojo.xhrPost({
		url:url_get_grade,
		content:{
			'dept_id':dept_id
			},
		handleAs:"json",
		load: function(data) {
			grade_store  = getDataStorefromJSON('id','name', data);
			dijit.byId('grade').set('store',grade_store);  
			dijit.byId('grade_result').set('store',grade_store);
			
			if(old_grade!=''){
				dijit.byId('grade').attr('value',old_grade);
			}
			dijit.byId('grade_result').attr("value",'<?php echo $this->rs['grade_result']?>');
			dijit.byId('grade').attr("value",'<?php echo $this->rs['grade']?>');
		},
		error: function(err) {
			alert(err);
		}
	});
}


 </script>
 <script>
 dojo.require("dojo.data.ItemFileWriteStore");  
 dojo.require("dojo.NodeList-manipulate");
	dojo.ready(function(){ 
		oldRow();
		dijit.byId('grade_result').attr('value','<?php echo $this->rs['grade_result']?>');
	});

	var col= 0; var no=0;
	var title = 0;
	var all_stu = '<?php //echo $this->all_stu; ?>';
	function addRow() {
		col++;no++;
		template='';
		temp = "";
	
		if(title!=1){
			temp+='<td><?php echo $tr->translate("DEL");?></td>';
			temp+='<td><?php echo $tr->translate("N_O");?></td>';
			temp+='<td><?php echo $tr->translate("SCHOOL_AND_NAME");?></td>';
			temp+='<td><?php echo $tr->translate("GRADE_LAVEL");?></td>';
			temp+='<td><?php echo $tr->translate("YEAR");?></td>';
			temp+='<td><?php echo $tr->translate("MAJOR");?></td>';
			temp+='<td><?php echo $tr->translate("NOTE");?></td>';
			dojo.query("#head-title").append(temp);
			title=1;
		}
			
		template+='<td width="2%" align="center"><img onclick="deleteRecord('+col+');" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
		template+='<td align="center" width="2%">'+no+'</td>';
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="school_name'+col+'" name="school_name'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="level'+col+'" name="level'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="year'+col+'" name="year'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="major'+col+'" name="major'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="remark_'+col+'" name="remark_'+col+'" value="" type="text"  ></td>';	
		tmp='<tr id="row'+col+'">';
		tmp+="</tr>";
		dojo.query("#table_row").append(tmp);
		if($("#identity").val()!="") {
			var identity = $("#identity").val();
			$("#identity").val(identity+','+col);
		} else {$("#identity").val(col);}
		dojo.html.set(dojo.byId("row"+col),template , {
		     parseContent: true,
		});
	}

	function oldRow() {
		<?php if(!empty($this->row_detail)) foreach($this->row_detail As $rs_detail){?>
		col++;no++;
		template='';
		temp = "";
	
		if(title!=1){
			temp+='<td><?php echo $tr->translate("DEL");?></td>';
			temp+='<td><?php echo $tr->translate("N_O");?></td>';
			temp+='<td><?php echo $tr->translate("SCHOOL_AND_NAME");?></td>';
			temp+='<td><?php echo $tr->translate("GRADE_LAVEL");?></td>';
			temp+='<td><?php echo $tr->translate("YEAR");?></td>';
			temp+='<td><?php echo $tr->translate("MAJOR");?></td>';
			temp+='<td><?php echo $tr->translate("NOTE");?></td>';
			dojo.query("#head-title").append(temp);
			title=1;
		}
			
		template+='<td width="2%" align="center"><img onclick="deleteRecord('+col+');" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
		template+='<td align="center" width="2%">'+no+'</td>';
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="school_name'+col+'" name="school_name'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="level'+col+'" name="level'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="year'+col+'" name="year'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="major'+col+'" name="major'+col+'" value="" type="text"  ></td>';	
		template+='<td width="10%"><input dojoType="dijit.form.ValidationTextBox" class="fullside" id="remark_'+col+'" name="remark_'+col+'" value="" type="text"  ></td>';	
		tmp='<tr id="row'+col+'">';
		tmp+="</tr>";
		dojo.query("#table_row").append(tmp);
		if($("#identity").val()!="") {
			var identity = $("#identity").val();
			$("#identity").val(identity+','+col);
		} else {$("#identity").val(col);}
		
		dojo.html.set(dojo.byId("row"+col),template , {
		     parseContent: true,
		});
		dijit.byId("school_name"+col).attr("value",'<?php echo $rs_detail['school_name']?>');
		dijit.byId("level"+col).attr("value",'<?php echo $rs_detail['level']?>');
		dijit.byId("year"+col).attr("value",'<?php echo $rs_detail['year']?>');
		dijit.byId("major"+col).attr("value",'<?php echo $rs_detail['major']?>');
		dijit.byId("remark_"+col).attr("value",'<?php echo $rs_detail['note']?>');
	<?php }?>
	}
	
	function deleteRecord(index) {
		var identity = $('#identity').val();
		var arrays = identity.split(',');
		for(var i=0;i<arrays.length;i++) {
		
		if(arrays[i] == index) arrays.splice(i,1);
			
		}
		var strings = arrays.join(',');
		$('#identity').val(strings);
		dojo.query("#row"+index).remove();
	}
</script>