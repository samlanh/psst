<?php
	$tr = Application_Form_FrmLanguages::getCurrentlanguage();
	echo $this->headTitle($tr->translate("ADD_PRODUCT_CATEGORY"));
	$baseurl =  Zend_Controller_Front::getInstance()->getBaseUrl();
 	$frm_degree= $this->frm_degree;
?>
<script src="<?php echo $baseurl;?>/js/help.js"></script>
<script type="text/javascript">
	dojo.require("dijit.form.Textarea");
	dojo.require("dijit.form.CheckBox");
</script>
<style>
.dijitTextArea[cols].dijitTextArea[cols]{
	width: 99%;
}
ul.opt-school {
    list-style-type: none;
}
 input[type=checkbox],  input[type=radio]{
	height: 15px;
    display: initial;
}
</style>
<div class="card">
	<div class="card-content collapse show">
		<div class="card-box">
       		<div class="col-sm-12 border-botom">
		    	<div class="col-sm-8 pd-0">
	    			<h4 class="m-b-0"><i class="fa fa-server " aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<?php echo $tr->translate('ADD_PRODUCT_CATEGORY');?></h4>
    			</div>
    			<div class="col-sm-4 text-right">
    			</div>
    		</div>
    	</div>
    	<form  id='frm_degree' action="" dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<script type="dojo/method" event="onSubmit">			
				if(this.validate()) {
					loadingBlock();
					return true;
				}else {
					return false;
				}
			</script>
	    	<div class="card-box">
				<div class="col-md-4 col-sm-4 col-xs-12">
					<div class="card-blogform">
							<div class="card-body"> 
									<div class="row"> 
										<div class="col-md-12 col-sm-12 col-xs-12">
												<div class="d-flex "> 
													<div class="settings-main-icon ">
														<i class="glyphicon glyphicon-tasks" aria-hidden="true"></i>
													</div> 
													<div class="col-md-10 col-sm-10 col-xs-12"> 
														<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("PRODUCT_TYPE_INFO");?></p>
													</div> 
												</div>
												<div class="form-group">
													<label class="control-label custom-switch float-start "> 
														<a href="javascript:void(0);"  class="switchButton status"><?php echo $tr->translate("Is Parent");?></a> 
														<input type="checkbox"  id="isParent" name="isParent" class="custom-switch-input"  onChange="Checkchange();"> 
														<span class="custom-switch-indicator custom-radius switch-status"></span> 
													</label>
												</div>
												<div class="form-group">
													<label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("PARENT");?></label>
													<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm_degree->getElement("parentId");?>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("TITLE");?> <span class="required">*</span></label>
													<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm_degree->getElement("title");?>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("TITLE_EN");?> <span class="required">*</span></label>
													<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm_degree->getElement("title_en");?>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("SHORTCUT");?> </label>
													<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm_degree->getElement("shortcut");?>
														<input type="hidden" id="type" name="type" value="3" />
													</div>
												</div>
												<div class="form-group">
													<label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("ORDERING");?> </label>
													<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm_degree->getElement("ordering");?>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label bold col-md-5 col-sm-5 col-xs-12"><?php echo $tr->translate("NOTE");?> </label>
													<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm_degree->getElement("note");?>
													</div>
												</div>
												
										</div>
									</div>
							</div>
					</div>
			
		         </div>


		         <div class="col-md-6 col-sm-6 col-xs-12">
				 		<div class="card-blogform">
							<div class="card-body"> 
									<div class="row"> 
										<div class="col-md-12 col-sm-12 col-xs-12">
										<div class="form-group">
												<label class="control-label col-md-12 col-sm-12 col-xs-12 title-blog bold" ><i class="glyphicon glyphicon-hand-right" aria-hidden="true"></i> <?php echo $tr->translate("School Option");?> 
												</label>
												</div>
												<div class="form-group">
													<span><input type="checkbox" class="checkbox"  name="check_all" id="check_all" value="all" OnChange="CheckAllTotal(0);" style=" height: initial;"  />&nbsp;<span class="bold" style="vertical-align: top;"><?php echo $tr->translate('ALL');?></span></span>
													<ul class="opt-school">
														<?php $identityCheck = ""; if (!empty($this->schoolOption)) foreach ($this->schoolOption as $rs){?>
														<li class="opt-items"> <input checked="checked"  type="checkbox"  class="checkbox"  value="<?php echo $rs['id'];?>" name="selector[]" onClick="CheckAllTotal(1);" /> <span style="vertical-align: top;"><?php echo $rs['name'];?></span></li>
															<?php if (empty($identityCheck)){ $identityCheck = $rs['id'];}else{$identityCheck = $identityCheck.",".$rs['id'];}?>
														<?php }?>
													</ul>
													<input type="hidden" id="identityCheck" name="identityCheck" value="<?php echo $identityCheck;?>" />
												</div>
											</div>

											<div class="clearfix"></div>
											<div class="card-box mt-20">
												<div class="col-md-12 col-sm-12 col-xs-12 border-top mt-20 ptb-10 text-center">
													<input  class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-open" type="submit"  label="<?php echo $tr->translate("SAVE_CLOSE");?>" id="save_close" name="save_close" value="save_close"
														dojoType="dijit.form.Button"  />
													<input  class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-saved" type="submit"  label="<?php echo $tr->translate("SAVE_NEW");?>" id="save_new" name="save_new" 
														dojoType="dijit.form.Button"  />
												</div>
											</div>

										</div>
									</div>
							</div>
						</div>
				</div>		
	    	</div>
    	</form>
    </div>
</div>
<script type="text/javascript">
	dojo.require("dijit.form.Textarea");
    dojo.require("dijit.form.NumberTextBox");
	dojo.require("dojo.data.ItemFileWriteStore");  
	dojo.require("dojo.NodeList-manipulate");
	
function CheckAllTotal(index){
	if(index==0){
		if($('#check_all').is(":checked")){
			$('.checkbox').each(function() { //loop through each checkbox
	            this.checked = true;  
			});
		}else{
			$('.checkbox').each(function() { //loop through each checkbox
	            this.checked = false;  
			});
		}
	}else{
		var a = $("input:checked").val();
		var identity = [];
	    $(':checkbox:checked').each(function(i){
	    	 identity[i] = $(this).val();
	    });
	    var allidentity = $("#identityCheck").val();
		if(identity == allidentity ){
			$('#check_all').prop('checked', true); // checks it
		}else{
			$('#check_all').prop('checked', false); // Unchecks it
		}
	}
}
function Checkchange(){
	if (dojo.byId("isParent").checked){
		dijit.byId('parentId').attr('value',''); 
		dijit.byId('parentId').set('readOnly',true); 
	}else{
		 dijit.byId('parentId').set('readOnly',false); 
	}
}

</script>